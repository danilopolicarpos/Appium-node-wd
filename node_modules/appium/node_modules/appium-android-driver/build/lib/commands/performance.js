"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = exports.NETWORK_KEYS = exports.BATTERY_KEYS = exports.MEMORY_KEYS = exports.CPU_KEYS = exports.SUPPORTED_PERFORMANCE_DATA_TYPES = exports.helpers = exports.commands = void 0;

require("source-map-support/register");

var _lodash = _interopRequireDefault(require("lodash"));

var _asyncbox = require("asyncbox");

let commands = {},
    helpers = {},
    extensions = {};
exports.helpers = helpers;
exports.commands = commands;
const NETWORK_KEYS = [['bucketStart', 'activeTime', 'rxBytes', 'rxPackets', 'txBytes', 'txPackets', 'operations', 'bucketDuration'], ['st', 'activeTime', 'rb', 'rp', 'tb', 'tp', 'op', 'bucketDuration']];
exports.NETWORK_KEYS = NETWORK_KEYS;
const CPU_KEYS = ['user', 'kernel'];
exports.CPU_KEYS = CPU_KEYS;
const BATTERY_KEYS = ['power'];
exports.BATTERY_KEYS = BATTERY_KEYS;
const MEMORY_KEYS = ['totalPrivateDirty', 'nativePrivateDirty', 'dalvikPrivateDirty', 'eglPrivateDirty', 'glPrivateDirty', 'totalPss', 'nativePss', 'dalvikPss', 'eglPss', 'glPss', 'nativeHeapAllocatedSize', 'nativeHeapSize'];
exports.MEMORY_KEYS = MEMORY_KEYS;
const SUPPORTED_PERFORMANCE_DATA_TYPES = {
  cpuinfo: 'the amount of cpu by user and kernel process - cpu information for applications on real devices and simulators',
  memoryinfo: 'the amount of memory used by the process - memory information for applications on real devices and simulators',
  batteryinfo: 'the remaining battery power - battery power information for applications on real devices and simulators',
  networkinfo: 'the network statistics - network rx/tx information for applications on real devices and simulators'
};
exports.SUPPORTED_PERFORMANCE_DATA_TYPES = SUPPORTED_PERFORMANCE_DATA_TYPES;
const RETRY_PAUSE = 1000;

commands.getPerformanceDataTypes = function getPerformanceDataTypes() {
  return _lodash.default.keys(SUPPORTED_PERFORMANCE_DATA_TYPES);
};

commands.getPerformanceData = async function getPerformanceData(packageName, dataType, dataReadTimeout = 2) {
  let data;

  switch (dataType) {
    case 'batteryinfo':
      data = await this.getBatteryInfo(dataReadTimeout);
      break;

    case 'cpuinfo':
      data = await this.getCPUInfo(packageName, dataReadTimeout);
      break;

    case 'memoryinfo':
      data = await this.getMemoryInfo(packageName, dataReadTimeout);
      break;

    case 'networkinfo':
      data = await this.getNetworkTrafficInfo(dataReadTimeout);
      break;

    default:
      throw new Error(`No performance data of type '${dataType}' found.`);
  }

  return data;
};

helpers.getCPUInfo = async function getCPUInfo(packageName, dataReadTimeout = 2) {
  return await (0, _asyncbox.retryInterval)(dataReadTimeout, RETRY_PAUSE, async () => {
    const cmd = ['dumpsys', 'cpuinfo', '|', 'grep', `'${packageName}'`];
    const data = await this.adb.shell(cmd);

    if (_lodash.default.isEmpty(data)) {
      throw new Error('No data from dumpsys');
    }

    const userMatch = /([\d.]+)%\s+user/.exec(data);
    const kernelMatch = /([\d.]+)%\s+kernel/.exec(data);

    if (!userMatch || !kernelMatch) {
      throw new Error(`Unable to parse cpu data: '${data}'`);
    }

    return [_lodash.default.clone(CPU_KEYS), [userMatch[1], kernelMatch[1]]];
  });
};

helpers.getBatteryInfo = async function getBatteryInfo(dataReadTimeout = 2) {
  return await (0, _asyncbox.retryInterval)(dataReadTimeout, RETRY_PAUSE, async () => {
    let cmd = ['dumpsys', 'battery', '|', 'grep', 'level'];
    let data = await this.adb.shell(cmd);
    if (!data) throw new Error('No data from dumpsys');
    let power = parseInt((data.split(':')[1] || '').trim(), 10);

    if (!Number.isNaN(power)) {
      return [_lodash.default.clone(BATTERY_KEYS), [power.toString()]];
    } else {
      throw new Error(`Unable to parse battery data: '${data}'`);
    }
  });
};

helpers.getMemoryInfo = async function getMemoryInfo(packageName, dataReadTimeout = 2) {
  return await (0, _asyncbox.retryInterval)(dataReadTimeout, RETRY_PAUSE, async () => {
    let cmd = ['dumpsys', 'meminfo', `'${packageName}'`, '|', 'grep', '-E', "'Native|Dalvik|EGL|GL|TOTAL'"];
    let data = await this.adb.shell(cmd);
    if (!data) throw new Error('No data from dumpsys');
    let totalPrivateDirty, totalPss, nativePrivateDirty, nativePss, nativeHeapSize, nativeHeapAllocatedSize, dalvikPrivateDirty, dalvikPss, eglPrivateDirty, eglPss, glPrivateDirty, glPss;
    let apilevel = await this.adb.getApiLevel();

    for (let line of data.split('\n')) {
      let entries = line.trim().split(' ').filter(Boolean);

      if (apilevel > 18) {
        let type = entries[0];
        let subType = entries[1];

        if (type === 'Native' && subType === 'Heap') {
          nativePss = entries[2];
          nativePrivateDirty = entries[3];
          nativeHeapSize = entries[6];
          nativeHeapAllocatedSize = entries[7];
        } else if (type === 'Dalvik' && subType === 'Heap') {
          dalvikPss = entries[2];
          dalvikPrivateDirty = entries[3];
        } else if (type === 'EGL' && subType === 'mtrack') {
          eglPss = entries[2];
          eglPrivateDirty = entries[3];
        } else if (type === 'GL' && subType === 'mtrack') {
          glPss = entries[2];
          glPrivateDirty = entries[3];
        } else if (type === 'TOTAL' && entries.length === 8) {
          totalPss = entries[1];
          totalPrivateDirty = entries[2];
        }
      } else {
        let type = entries[0];

        if (type === 'Native') {
          nativePss = entries[1];
          nativePrivateDirty = entries[3];
          nativeHeapSize = entries[4];
          nativeHeapAllocatedSize = entries[5];
        } else if (type === 'Dalvik') {
          dalvikPss = entries[1];
          dalvikPrivateDirty = entries[3];
        } else if (type === 'EGL') {
          eglPss = entries[1];
          eglPrivateDirty = entries[3];
        } else if (type === 'GL') {
          glPss = entries[1];
          glPrivateDirty = entries[3];
        } else if (type === 'TOTAL') {
          totalPss = entries[1];
          totalPrivateDirty = entries[3];
        }
      }
    }

    if (totalPrivateDirty && totalPrivateDirty !== 'nodex') {
      let headers = _lodash.default.clone(MEMORY_KEYS);

      let data = [totalPrivateDirty, nativePrivateDirty, dalvikPrivateDirty, eglPrivateDirty, glPrivateDirty, totalPss, nativePss, dalvikPss, eglPss, glPss, nativeHeapAllocatedSize, nativeHeapSize];
      return [headers, data];
    } else {
      throw new Error(`Unable to parse memory data: '${data}'`);
    }
  });
};

helpers.getNetworkTrafficInfo = async function getNetworkTrafficInfo(dataReadTimeout = 2) {
  return await (0, _asyncbox.retryInterval)(dataReadTimeout, RETRY_PAUSE, async () => {
    let returnValue = [];
    let bucketDuration, bucketStart, activeTime, rxBytes, rxPackets, txBytes, txPackets, operations;
    let cmd = ['dumpsys', 'netstats'];
    let data = await this.adb.shell(cmd);
    if (!data) throw new Error('No data from dumpsys');
    let index = 0;
    let fromXtstats = data.indexOf('Xt stats:');
    let start = data.indexOf('Pending bytes:', fromXtstats);
    let delimiter = data.indexOf(':', start + 1);
    let end = data.indexOf('\n', delimiter + 1);
    let pendingBytes = data.substring(delimiter + 1, end).trim();

    if (end > delimiter) {
      start = data.indexOf('bucketDuration', end + 1);
      delimiter = data.indexOf('=', start + 1);
      end = data.indexOf('\n', delimiter + 1);
      bucketDuration = data.substring(delimiter + 1, end).trim();
    }

    if (start >= 0) {
      data = data.substring(end + 1, data.length);
      let arrayList = data.split('\n');

      if (arrayList.length > 0) {
        start = -1;

        for (let j = 0; j < NETWORK_KEYS.length; ++j) {
          start = arrayList[0].indexOf(NETWORK_KEYS[j][0]);

          if (start >= 0) {
            index = j;
            returnValue[0] = [];

            for (let k = 0; k < NETWORK_KEYS[j].length; ++k) {
              returnValue[0][k] = NETWORK_KEYS[j][k];
            }

            break;
          }
        }

        let returnIndex = 1;

        for (let i = 0; i < arrayList.length; i++) {
          data = arrayList[i];
          start = data.indexOf(NETWORK_KEYS[index][0]);

          if (start >= 0) {
            delimiter = data.indexOf('=', start + 1);
            end = data.indexOf(' ', delimiter + 1);
            bucketStart = data.substring(delimiter + 1, end).trim();

            if (end > delimiter) {
              start = data.indexOf(NETWORK_KEYS[index][1], end + 1);

              if (start >= 0) {
                delimiter = data.indexOf('=', start + 1);
                end = data.indexOf(' ', delimiter + 1);
                activeTime = data.substring(delimiter + 1, end).trim();
              }
            }

            if (end > delimiter) {
              start = data.indexOf(NETWORK_KEYS[index][2], end + 1);

              if (start >= 0) {
                delimiter = data.indexOf('=', start + 1);
                end = data.indexOf(' ', delimiter + 1);
                rxBytes = data.substring(delimiter + 1, end).trim();
              }
            }

            if (end > delimiter) {
              start = data.indexOf(NETWORK_KEYS[index][3], end + 1);

              if (start >= 0) {
                delimiter = data.indexOf('=', start + 1);
                end = data.indexOf(' ', delimiter + 1);
                rxPackets = data.substring(delimiter + 1, end).trim();
              }
            }

            if (end > delimiter) {
              start = data.indexOf(NETWORK_KEYS[index][4], end + 1);

              if (start >= 0) {
                delimiter = data.indexOf('=', start + 1);
                end = data.indexOf(' ', delimiter + 1);
                txBytes = data.substring(delimiter + 1, end).trim();
              }
            }

            if (end > delimiter) {
              start = data.indexOf(NETWORK_KEYS[index][5], end + 1);

              if (start >= 0) {
                delimiter = data.indexOf('=', start + 1);
                end = data.indexOf(' ', delimiter + 1);
                txPackets = data.substring(delimiter + 1, end).trim();
              }
            }

            if (end > delimiter) {
              start = data.indexOf(NETWORK_KEYS[index][6], end + 1);

              if (start >= 0) {
                delimiter = data.indexOf('=', start + 1);
                end = data.length;
                operations = data.substring(delimiter + 1, end).trim();
              }
            }

            returnValue[returnIndex++] = [bucketStart, activeTime, rxBytes, rxPackets, txBytes, txPackets, operations, bucketDuration];
          }
        }
      }
    }

    if (!_lodash.default.isEqual(pendingBytes, '') && !_lodash.default.isUndefined(pendingBytes) && !_lodash.default.isEqual(pendingBytes, 'nodex')) {
      return returnValue;
    } else {
      throw new Error(`Unable to parse network traffic data: '${data}'`);
    }
  });
};

Object.assign(extensions, commands, helpers);
var _default = extensions;
exports.default = _default;require('source-map-support').install();


//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxpYi9jb21tYW5kcy9wZXJmb3JtYW5jZS5qcyJdLCJuYW1lcyI6WyJjb21tYW5kcyIsImhlbHBlcnMiLCJleHRlbnNpb25zIiwiTkVUV09SS19LRVlTIiwiQ1BVX0tFWVMiLCJCQVRURVJZX0tFWVMiLCJNRU1PUllfS0VZUyIsIlNVUFBPUlRFRF9QRVJGT1JNQU5DRV9EQVRBX1RZUEVTIiwiY3B1aW5mbyIsIm1lbW9yeWluZm8iLCJiYXR0ZXJ5aW5mbyIsIm5ldHdvcmtpbmZvIiwiUkVUUllfUEFVU0UiLCJnZXRQZXJmb3JtYW5jZURhdGFUeXBlcyIsIl8iLCJrZXlzIiwiZ2V0UGVyZm9ybWFuY2VEYXRhIiwicGFja2FnZU5hbWUiLCJkYXRhVHlwZSIsImRhdGFSZWFkVGltZW91dCIsImRhdGEiLCJnZXRCYXR0ZXJ5SW5mbyIsImdldENQVUluZm8iLCJnZXRNZW1vcnlJbmZvIiwiZ2V0TmV0d29ya1RyYWZmaWNJbmZvIiwiRXJyb3IiLCJjbWQiLCJhZGIiLCJzaGVsbCIsImlzRW1wdHkiLCJ1c2VyTWF0Y2giLCJleGVjIiwia2VybmVsTWF0Y2giLCJjbG9uZSIsInBvd2VyIiwicGFyc2VJbnQiLCJzcGxpdCIsInRyaW0iLCJOdW1iZXIiLCJpc05hTiIsInRvU3RyaW5nIiwidG90YWxQcml2YXRlRGlydHkiLCJ0b3RhbFBzcyIsIm5hdGl2ZVByaXZhdGVEaXJ0eSIsIm5hdGl2ZVBzcyIsIm5hdGl2ZUhlYXBTaXplIiwibmF0aXZlSGVhcEFsbG9jYXRlZFNpemUiLCJkYWx2aWtQcml2YXRlRGlydHkiLCJkYWx2aWtQc3MiLCJlZ2xQcml2YXRlRGlydHkiLCJlZ2xQc3MiLCJnbFByaXZhdGVEaXJ0eSIsImdsUHNzIiwiYXBpbGV2ZWwiLCJnZXRBcGlMZXZlbCIsImxpbmUiLCJlbnRyaWVzIiwiZmlsdGVyIiwiQm9vbGVhbiIsInR5cGUiLCJzdWJUeXBlIiwibGVuZ3RoIiwiaGVhZGVycyIsInJldHVyblZhbHVlIiwiYnVja2V0RHVyYXRpb24iLCJidWNrZXRTdGFydCIsImFjdGl2ZVRpbWUiLCJyeEJ5dGVzIiwicnhQYWNrZXRzIiwidHhCeXRlcyIsInR4UGFja2V0cyIsIm9wZXJhdGlvbnMiLCJpbmRleCIsImZyb21YdHN0YXRzIiwiaW5kZXhPZiIsInN0YXJ0IiwiZGVsaW1pdGVyIiwiZW5kIiwicGVuZGluZ0J5dGVzIiwic3Vic3RyaW5nIiwiYXJyYXlMaXN0IiwiaiIsImsiLCJyZXR1cm5JbmRleCIsImkiLCJpc0VxdWFsIiwiaXNVbmRlZmluZWQiLCJPYmplY3QiLCJhc3NpZ24iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQUE7O0FBQ0E7O0FBR0EsSUFBSUEsUUFBUSxHQUFHLEVBQWY7QUFBQSxJQUFtQkMsT0FBTyxHQUFHLEVBQTdCO0FBQUEsSUFBaUNDLFVBQVUsR0FBRyxFQUE5Qzs7O0FBRUEsTUFBTUMsWUFBWSxHQUFHLENBQUMsQ0FBQyxhQUFELEVBQWdCLFlBQWhCLEVBQThCLFNBQTlCLEVBQXlDLFdBQXpDLEVBQXNELFNBQXRELEVBQWlFLFdBQWpFLEVBQThFLFlBQTlFLEVBQTRGLGdCQUE1RixDQUFELEVBQWdILENBQUMsSUFBRCxFQUFPLFlBQVAsRUFBcUIsSUFBckIsRUFBMkIsSUFBM0IsRUFBaUMsSUFBakMsRUFBdUMsSUFBdkMsRUFBNkMsSUFBN0MsRUFBbUQsZ0JBQW5ELENBQWhILENBQXJCOztBQUNBLE1BQU1DLFFBQVEsR0FBRyxDQUFDLE1BQUQsRUFBUyxRQUFULENBQWpCOztBQUNBLE1BQU1DLFlBQVksR0FBRyxDQUFDLE9BQUQsQ0FBckI7O0FBQ0EsTUFBTUMsV0FBVyxHQUFHLENBQUMsbUJBQUQsRUFBc0Isb0JBQXRCLEVBQTRDLG9CQUE1QyxFQUFrRSxpQkFBbEUsRUFBcUYsZ0JBQXJGLEVBQXVHLFVBQXZHLEVBQW1ILFdBQW5ILEVBQWdJLFdBQWhJLEVBQTZJLFFBQTdJLEVBQXVKLE9BQXZKLEVBQWdLLHlCQUFoSyxFQUEyTCxnQkFBM0wsQ0FBcEI7O0FBRUEsTUFBTUMsZ0NBQWdDLEdBQUc7QUFDdkNDLEVBQUFBLE9B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QUFDckcsYUFBT2YsV0FBUDtBQUNELEtBRkQsTUFFTztBQUNMLFlBQU0sSUFBSXRDLEtBQUosQ0FBVywwQ0FBeUNMLElBQUssR0FBekQsQ0FBTjtBQUNEO0FBQ0YsR0FySlksQ0FBYjtBQXNKRCxDQXZKRDs7QUF5SkFtRSxNQUFNLENBQUNDLE1BQVAsQ0FBY3RGLFVBQWQsRUFBMEJGLFFBQTFCLEVBQW9DQyxPQUFwQztlQUtlQyxVIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IF8gZnJvbSAnbG9kYXNoJztcbmltcG9ydCB7IHJldHJ5SW50ZXJ2YWwgfSBmcm9tICdhc3luY2JveCc7XG5cblxubGV0IGNvbW1hbmRzID0ge30sIGhlbHBlcnMgPSB7fSwgZXh0ZW5zaW9ucyA9IHt9O1xuXG5jb25zdCBORVRXT1JLX0tFWVMgPSBbWydidWNrZXRTdGFydCcsICdhY3RpdmVUaW1lJywgJ3J4Qnl0ZXMnLCAncnhQYWNrZXRzJywgJ3R4Qnl0ZXMnLCAndHhQYWNrZXRzJywgJ29wZXJhdGlvbnMnLCAnYnVja2V0RHVyYXRpb24nXSwgWydzdCcsICdhY3RpdmVUaW1lJywgJ3JiJywgJ3JwJywgJ3RiJywgJ3RwJywgJ29wJywgJ2J1Y2tldER1cmF0aW9uJ11dO1xuY29uc3QgQ1BVX0tFWVMgPSBbJ3VzZXInLCAna2VybmVsJ107XG5jb25zdCBCQVRURVJZX0tFWVMgPSBbJ3Bvd2VyJ107XG5jb25zdCBNRU1PUllfS0VZUyA9IFsndG90YWxQcml2YXRlRGlydHknLCAnbmF0aXZlUHJpdmF0ZURpcnR5JywgJ2RhbHZpa1ByaXZhdGVEaXJ0eScsICdlZ2xQcml2YXRlRGlydHknLCAnZ2xQcml2YXRlRGlydHknLCAndG90YWxQc3MnLCAnbmF0aXZlUHNzJywgJ2RhbHZpa1BzcycsICdlZ2xQc3MnLCAnZ2xQc3MnLCAnbmF0aXZlSGVhcEFsbG9jYXRlZFNpemUnLCAnbmF0aXZlSGVhcFNpemUnXTtcblxuY29uc3QgU1VQUE9SVEVEX1BFUkZPUk1BTkNFX0RBVEFfVFlQRVMgPSB7XG4gIGNwdWluZm86ICd0aGUgYW1vdW50IG9mIGNwdSBieSB1c2VyIGFuZCBrZXJuZWwgcHJvY2VzcyAtIGNwdSBpbmZvcm1hdGlvbiBmb3IgYXBwbGljYXRpb25zIG9uIHJlYWwgZGV2aWNlcyBhbmQgc2ltdWxhdG9ycycsXG4gIG1lbW9yeWluZm86ICd0aGUgYW1vdW50IG9mIG1lbW9yeSB1c2VkIGJ5IHRoZSBwcm9jZXNzIC0gbWVtb3J5IGluZm9ybWF0aW9uIGZvciBhcHBsaWNhdGlvbnMgb24gcmVhbCBkZXZpY2VzIGFuZCBzaW11bGF0b3JzJyxcbiAgYmF0dGVyeWluZm86ICd0aGUgcmVtYWluaW5nIGJhdHRlcnkgcG93ZXIgLSBiYXR0ZXJ5IHBvd2VyIGluZm9ybWF0aW9uIGZvciBhcHBsaWNhdGlvbnMgb24gcmVhbCBkZXZpY2VzIGFuZCBzaW11bGF0b3JzJyxcbiAgbmV0d29ya2luZm86ICd0aGUgbmV0d29yayBzdGF0aXN0aWNzIC0gbmV0d29yayByeC90eCBpbmZvcm1hdGlvbiBmb3IgYXBwbGljYXRpb25zIG9uIHJlYWwgZGV2aWNlcyBhbmQgc2ltdWxhdG9ycydcbn07XG5cbmNvbnN0IFJFVFJZX1BBVVNFID0gMTAwMDtcblxuLy9cbi8vIHJldHVybnMgdGhlIGluZm9ybWF0aW9uIHR5cGUgb2YgdGhlIHN5c3RlbSBzdGF0ZSB3aGljaCBpcyBzdXBwb3J0ZWQgdG8gcmVhZCBhcyBsaWtlIGNwdSwgbWVtb3J5LCBuZXR3b3JrIHRyYWZmaWMsIGFuZCBiYXR0ZXJ5LlxuLy8gb3V0cHV0IC0gYXJyYXkgbGlrZSBiZWxvd1xuLy9bY3B1aW5mbywgYmF0dGVyeWluZm8sIG5ldHdvcmtpbmZvLCBtZW1vcnlpbmZvXVxuLy9cbmNvbW1hbmRzLmdldFBlcmZvcm1hbmNlRGF0YVR5cGVzID0gZnVuY3Rpb24gZ2V0UGVyZm9ybWFuY2VEYXRhVHlwZXMgKCkge1xuICByZXR1cm4gXy5rZXlzKFNVUFBPUlRFRF9QRVJGT1JNQU5DRV9EQVRBX1RZUEVTKTtcbn07XG5cbi8vIHJldHVybnMgdGhlIGluZm9ybWF0aW9uIHR5cGUgb2YgdGhlIHN5c3RlbSBzdGF0ZSB3aGljaCBpcyBzdXBwb3J0ZWQgdG8gcmVhZCBhcyBsaWtlIGNwdSwgbWVtb3J5LCBuZXR3b3JrIHRyYWZmaWMsIGFuZCBiYXR0ZXJ5LlxuLy9pbnB1dCAtIChwYWNrYWdlTmFtZSkgdGhlIHBhY2thZ2UgbmFtZSBvZiB0aGUgYXBwbGljYXRpb25cbi8vICAgICAgICAoZGF0YVR5cGUpIHRoZSB0eXBlIG9mIHN5c3RlbSBzdGF0ZSB3aGljaCB3YW50cyB0byByZWFkLiBJdCBzaG91bGQgYmUgb25lIG9mIHRoZSBrZXlzIG9mIHRoZSBTVVBQT1JURURfUEVSRk9STUFOQ0VfREFUQV9UWVBFU1xuLy8gICAgICAgIChkYXRhUmVhZFRpbWVvdXQpIHRoZSBudW1iZXIgb2YgYXR0ZW1wdHMgdG8gcmVhZFxuLy8gb3V0cHV0IC0gdGFibGUgb2YgdGhlIHBlcmZvcm1hbmNlIGRhdGEsIFRoZSBmaXJzdCBsaW5lIG9mIHRoZSB0YWJsZSByZXByZXNlbnRzIHRoZSB0eXBlIG9mIGRhdGEuIFRoZSByZW1haW5pbmcgbGluZXMgcmVwcmVzZW50IHRoZSB2YWx1ZXMgb2YgdGhlIGRhdGEuXG4vL1xuLy8gaW4gY2FzZSBvZiBiYXR0ZXJ5IGluZm8gOiBbW3Bvd2VyXSwgWzIzXV1cbi8vIGluIGNhc2Ugb2YgbWVtb3J5IGluZm8gOiAgW1t0b3RhbFByaXZhdGVEaXJ0eSwgbmF0aXZlUHJpdmF0ZURpcnR5LCBkYWx2aWtQcml2YXRlRGlydHksIGVnbFByaXZhdGVEaXJ0eSwgZ2xQcml2YXRlRGlydHksIHRvdGFsUHNzLCBuYXRpdmVQc3MsIGRhbHZpa1BzcywgZWdsUHNzLCBnbFBzcywgbmF0aXZlSGVhcEFsbG9jYXRlZFNpemUsIG5hdGl2ZUhlYXBTaXplXSwgWzE4MzYwLCA4Mjk2LCA2MTMyLCBudWxsLCBudWxsLCA0MjU4OCwgODQwNiwgNzAyNCwgbnVsbCwgbnVsbCwgMjY1MTksIDEwMzQ0XV1cbi8vIGluIGNhc2Ugb2YgbmV0d29yayBpbmZvIDogW1tidWNrZXRTdGFydCwgYWN0aXZlVGltZSwgcnhCeXRlcywgcnhQYWNrZXRzLCB0eEJ5dGVzLCB0eFBhY2tldHMsIG9wZXJhdGlvbnMsIGJ1Y2tldER1cmF0aW9uLF0sIFsxNDc4MDkxNjAwMDAwLCBudWxsLCAxMDk5MDc1LCA2MTA5NDcsIDkyOCwgMTE0MzYyLCA3NjksIDAsIDM2MDAwMDBdLCBbMTQ3ODA5NTIwMDAwMCwgbnVsbCwgMTMwNjMwMCwgNDA1OTk3LCA1MDksIDQ2MzU5LCAzNzAsIDAsIDM2MDAwMDBdXVxuLy8gaW4gY2FzZSBvZiBuZXR3b3JrIGluZm8gOiBbW3N0LCBhY3RpdmVUaW1lLCByYiwgcnAsIHRiLCB0cCwgb3AsIGJ1Y2tldER1cmF0aW9uXSwgWzE0NzgwODgwMDAsIG51bGwsIG51bGwsIDMyMTE1Mjk2LCAzNDI5MSwgMjk1NjgwNSwgMjU3MDUsIDAsIDM2MDBdLCBbMTQ3ODA5MTYwMCwgbnVsbCwgbnVsbCwgMjcxNDY4MywgMTE4MjEsIDE0MjA1NjQsIDEyNjUwLCAwLCAzNjAwXSwgWzE0NzgwOTUyMDAsIG51bGwsIG51bGwsIDEwMDc5MjEzLCAxOTk2MiwgMjQ4NzcwNSwgMjAwMTUsIDAsIDM2MDBdLCBbMTQ3ODA5ODgwMCwgbnVsbCwgbnVsbCwgNDQ0NDQzMywgMTAyMjcsIDE0MzAzNTYsIDEwNDkzLCAwLCAzNjAwXV1cbi8vIGluIGNhc2Ugb2YgY3B1IGluZm8gOiBbW3VzZXIsIGtlcm5lbF0sIFswLjksIDEuM11dXG4vL1xuY29tbWFuZHMuZ2V0UGVyZm9ybWFuY2VEYXRhID0gYXN5bmMgZnVuY3Rpb24gZ2V0UGVyZm9ybWFuY2VEYXRhIChwYWNrYWdlTmFtZSwgZGF0YVR5cGUsIGRhdGFSZWFkVGltZW91dCA9IDIpIHtcbiAgbGV0IGRhdGE7XG4gIHN3aXRjaCAoZGF0YVR5cGUpIHtcbiAgICBjYXNlICdiYXR0ZXJ5aW5mbyc6XG4gICAgICBkYXRhID0gYXdhaXQgdGhpcy5nZXRCYXR0ZXJ5SW5mbyhkYXRhUmVhZFRpbWVvdXQpO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAnY3B1aW5mbyc6XG4gICAgICBkYXRhID0gYXdhaXQgdGhpcy5nZXRDUFVJbmZvKHBhY2thZ2VOYW1lLCBkYXRhUmVhZFRpbWVvdXQpO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAnbWVtb3J5aW5mbyc6XG4gICAgICBkYXRhID0gYXdhaXQgdGhpcy5nZXRNZW1vcnlJbmZvKHBhY2thZ2VOYW1lLCBkYXRhUmVhZFRpbWVvdXQpO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAnbmV0d29ya2luZm8nOlxuICAgICAgZGF0YSA9IGF3YWl0IHRoaXMuZ2V0TmV0d29ya1RyYWZmaWNJbmZvKGRhdGFSZWFkVGltZW91dCk7XG4gICAgICBicmVhaztcbiAgICBkZWZhdWx0OlxuICAgICAgdGhyb3cgbmV3IEVycm9yKGBObyBwZXJmb3JtYW5jZSBkYXRhIG9mIHR5cGUgJyR7ZGF0YVR5cGV9JyBmb3VuZC5gKTtcbiAgfVxuICByZXR1cm4gZGF0YTtcbn07XG5cbmhlbHBlcnMuZ2V0Q1BVSW5mbyA9IGFzeW5jIGZ1bmN0aW9uIGdldENQVUluZm8gKHBhY2thZ2VOYW1lLCBkYXRhUmVhZFRpbWVvdXQgPSAyKSB7XG4gIC8vIFRPRE86IGZpZ3VyZSBvdXQgd2h5IHRoaXMgaXNcbiAgLy8gc29tZXRpbWVzLCB0aGUgZnVuY3Rpb24gb2YgJ2FkYi5zaGVsbCcgZmFpbHMuIHdoZW4gSSB0ZXN0ZWQgdGhpcyBmdW5jdGlvbiBvbiB0aGUgdGFyZ2V0IG9mICdHYWxheHkgTm90ZTUnLFxuICAvLyBhZGIuc2hlbGwoZHVtcHN5cyBjcHVpbmZvKSByZXR1cm5zIGNwdSBkYXRhcyBmb3Igb3RoZXIgYXBwbGljYXRpb24gcGFja2FnZXMsIGJ1dCBJIGNhbid0IGZpbmQgdGhlIGRhdGEgZm9yIHBhY2thZ2VOYW1lLlxuICAvLyBJdCB1c3VhbGx5IGZhaWxzIDMwIHRpbWVzIGFuZCBzdWNjZXNzIGZvciB0aGUgbmV4dCB0aW1lLFxuICAvLyBTaW5jZSB0aGVuLCBoZSBoYXMgY29udGludWVkIHRvIHN1Y2NlZWQuXG4gIHJldHVybiBhd2FpdCByZXRyeUludGVydmFsKGRhdGFSZWFkVGltZW91dCwgUkVUUllfUEFVU0UsIGFzeW5jICgpID0+IHtcbiAgICBjb25zdCBjbWQgPSBbJ2R1bXBzeXMnLCAnY3B1aW5mbycsICd8JywgJ2dyZXAnLCBgJyR7cGFja2FnZU5hbWV9J2BdO1xuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCB0aGlzLmFkYi5zaGVsbChjbWQpO1xuICAgIGlmIChfLmlzRW1wdHkoZGF0YSkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTm8gZGF0YSBmcm9tIGR1bXBzeXMnKTtcbiAgICB9XG4gICAgLy8gYGRhdGFgIHdpbGwgYmUgc29tZXRoaW5nIGxpa2VcbiAgICAvLyAgICArMCUgMjIwOS9pby5hcHBpdW0uYW5kcm9pZC5hcGlzOiAwLjElIHVzZXIgKyAwLjIlIGtlcm5lbFxuICAgIGNvbnN0IHVzZXJNYXRjaCA9IC8oW1xcZC5dKyklXFxzK3VzZXIvLmV4ZWMoZGF0YSk7XG4gICAgY29uc3Qga2VybmVsTWF0Y2ggPSAvKFtcXGQuXSspJVxccytrZXJuZWwvLmV4ZWMoZGF0YSk7XG4gICAgaWYgKCF1c2VyTWF0Y2ggfHwgIWtlcm5lbE1hdGNoKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYFVuYWJsZSB0byBwYXJzZSBjcHUgZGF0YTogJyR7ZGF0YX0nYCk7XG4gICAgfVxuICAgIHJldHVybiBbXy5jbG9uZShDUFVfS0VZUyksIFt1c2VyTWF0Y2hbMV0sIGtlcm5lbE1hdGNoWzFdXV07XG4gIH0pO1xufTtcblxuaGVscGVycy5nZXRCYXR0ZXJ5SW5mbyA9IGFzeW5jIGZ1bmN0aW9uIGdldEJhdHRlcnlJbmZvIChkYXRhUmVhZFRpbWVvdXQgPSAyKSB7XG4gIHJldHVybiBhd2FpdCByZXRyeUludGVydmFsKGRhdGFSZWFkVGltZW91dCwgUkVUUllfUEFVU0UsIGFzeW5jICgpID0+IHtcbiAgICBsZXQgY21kID0gWydkdW1wc3lzJywgJ2JhdHRlcnknLCAnfCcsICdncmVwJywgJ2xldmVsJ107XG4gICAgbGV0IGRhdGEgPSBhd2FpdCB0aGlzLmFkYi5zaGVsbChjbWQpO1xuICAgIGlmICghZGF0YSkgdGhyb3cgbmV3IEVycm9yKCdObyBkYXRhIGZyb20gZHVtcHN5cycpOyAvL2VzbGludC1kaXNhYmxlLWxpbmUgY3VybHlcblxuICAgIGxldCBwb3dlciA9IHBhcnNlSW50KChkYXRhLnNwbGl0KCc6JylbMV0gfHwgJycpLnRyaW0oKSwgMTApO1xuXG4gICAgaWYgKCFOdW1iZXIuaXNOYU4ocG93ZXIpKSB7XG4gICAgICByZXR1cm4gW18uY2xvbmUoQkFUVEVSWV9LRVlTKSwgW3Bvd2VyLnRvU3RyaW5nKCldXTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBVbmFibGUgdG8gcGFyc2UgYmF0dGVyeSBkYXRhOiAnJHtkYXRhfSdgKTtcbiAgICB9XG4gIH0pO1xuXG59O1xuXG5oZWxwZXJzLmdldE1lbW9yeUluZm8gPSBhc3luYyBmdW5jdGlvbiBnZXRNZW1vcnlJbmZvIChwYWNrYWdlTmFtZSwgZGF0YVJlYWRUaW1lb3V0ID0gMikge1xuICByZXR1cm4gYXdhaXQgcmV0cnlJbnRlcnZhbChkYXRhUmVhZFRpbWVvdXQsIFJFVFJZX1BBVVNFLCBhc3luYyAoKSA9PiB7XG4gICAgbGV0IGNtZCA9IFsnZHVtcHN5cycsICdtZW1pbmZvJywgYCcke3BhY2thZ2VOYW1lfSdgLCAnfCcsICdncmVwJywgJy1FJywgXCInTmF0aXZlfERhbHZpa3xFR0x8R0x8VE9UQUwnXCJdO1xuICAgIGxldCBkYXRhID0gYXdhaXQgdGhpcy5hZGIuc2hlbGwoY21kKTtcbiAgICBpZiAoIWRhdGEpIHRocm93IG5ldyBFcnJvcignTm8gZGF0YSBmcm9tIGR1bXBzeXMnKTsgLy9lc2xpbnQtZGlzYWJsZS1saW5lIGN1cmx5XG5cbiAgICBsZXQgdG90YWxQcml2YXRlRGlydHksIHRvdGFsUHNzLFxuICAgICAgICBuYXRpdmVQcml2YXRlRGlydHksIG5hdGl2ZVBzcywgbmF0aXZlSGVhcFNpemUsIG5hdGl2ZUhlYXBBbGxvY2F0ZWRTaXplLFxuICAgICAgICBkYWx2aWtQcml2YXRlRGlydHksIGRhbHZpa1BzcyxcbiAgICAgICAgZWdsUHJpdmF0ZURpcnR5LCBlZ2xQc3MsXG4gICAgICAgIGdsUHJpdmF0ZURpcnR5LCBnbFBzcztcbiAgICBsZXQgYXBpbGV2ZWwgPSBhd2FpdCB0aGlzLmFkYi5nZXRBcGlMZXZlbCgpO1xuICAgIGZvciAobGV0IGxpbmUgb2YgZGF0YS5zcGxpdCgnXFxuJykpIHtcbiAgICAgIGxldCBlbnRyaWVzID0gbGluZS50cmltKCkuc3BsaXQoJyAnKS5maWx0ZXIoQm9vbGVhbik7XG4gICAgICAvLyBlbnRyaWVzIHdpbGwgaGF2ZSB0aGUgdmFsdWVzXG4gICAgICAvLyAgIFsnPFN5c3RlbSBUeXBlPicsICc8TWVtb3J5IFR5cGU+JywgPHBzcyB0b3RhbD4sIDxwcml2YXRlIGRpcnR5PiwgPHByaXZhdGUgY2xlYW4+LCA8c3dhcFBzcyBkaXJ0eT4sIDxoZWFwIHNpemU+LCA8aGVhcCBhbGxvYz4sIDxoZWFwIGZyZWU+XVxuICAgICAgLy8gZXhjZXB0ICdUT1RBTCcsIHdoaWNoIHNraXBzIHRoZSBzZWNvbmQgdHlwZSBuYW1lXG4gICAgICAvL1xuICAgICAgLy8gYW5kIG9uIEFQSSBsZXZlbCAxOCBhbmQgYmVsb3dcbiAgICAgIC8vICAgWyc8U3lzdGVtIFR5cGUnLCAnPHBwcz4nLCAnPHNoYXJlZCBkaXJ0eT4nLCAnPHByaXZhdGUgZGlydHk+JywgJzxoZWFwIHNpemU+JywgJzxoZWFwIGFsbG9jPicsICc8aGVhcCBmcmVlPiddXG5cbiAgICAgIGlmIChhcGlsZXZlbCA+IDE4KSB7XG4gICAgICAgIGxldCB0eXBlID0gZW50cmllc1swXTtcbiAgICAgICAgbGV0IHN1YlR5cGUgPSBlbnRyaWVzWzFdO1xuICAgICAgICBpZiAodHlwZSA9PT0gJ05hdGl2ZScgJiYgc3ViVHlwZSA9PT0gJ0hlYXAnKSB7XG4gICAgICAgICAgLy8gbmF0aXZlIGhlYXBcbiAgICAgICAgICBuYXRpdmVQc3MgPSBlbnRyaWVzWzJdO1xuICAgICAgICAgIG5hdGl2ZVByaXZhdGVEaXJ0eSA9IGVudHJpZXNbM107XG4gICAgICAgICAgbmF0aXZlSGVhcFNpemUgPSBlbnRyaWVzWzZdO1xuICAgICAgICAgIG5hdGl2ZUhlYXBBbGxvY2F0ZWRTaXplID0gZW50cmllc1s3XTtcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlID09PSAnRGFsdmlrJyAmJiBzdWJUeXBlID09PSAnSGVhcCcpIHtcbiAgICAgICAgICAvLyBkYWx2aWsgaGVhcFxuICAgICAgICAgIGRhbHZpa1BzcyA9IGVudHJpZXNbMl07XG4gICAgICAgICAgZGFsdmlrUHJpdmF0ZURpcnR5ID0gZW50cmllc1szXTtcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlID09PSAnRUdMJyAmJiBzdWJUeXBlID09PSAnbXRyYWNrJykge1xuICAgICAgICAgIC8vIGVnbFxuICAgICAgICAgIGVnbFBzcyA9IGVudHJpZXNbMl07XG4gICAgICAgICAgZWdsUHJpdmF0ZURpcnR5ID0gZW50cmllc1szXTtcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlID09PSAnR0wnICYmIHN1YlR5cGUgPT09ICdtdHJhY2snKSB7XG4gICAgICAgICAgLy8gZ2xcbiAgICAgICAgICBnbFBzcyA9IGVudHJpZXNbMl07XG4gICAgICAgICAgZ2xQcml2YXRlRGlydHkgPSBlbnRyaWVzWzNdO1xuICAgICAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICdUT1RBTCcgJiYgZW50cmllcy5sZW5ndGggPT09IDgpIHtcbiAgICAgICAgICAvLyB0aGVyZSBhcmUgdHdvIHRvdGFscywgYW5kIHdlIG9ubHkgd2FudCB0aGUgZnVsbCBsaXN0aW5nLCB3aGljaCBoYXMgOCBlbnRyaWVzXG4gICAgICAgICAgdG90YWxQc3MgPSBlbnRyaWVzWzFdO1xuICAgICAgICAgIHRvdGFsUHJpdmF0ZURpcnR5ID0gZW50cmllc1syXTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbGV0IHR5cGUgPSBlbnRyaWVzWzBdO1xuICAgICAgICBpZiAodHlwZSA9PT0gJ05hdGl2ZScpIHtcbiAgICAgICAgICBuYXRpdmVQc3MgPSBlbnRyaWVzWzFdO1xuICAgICAgICAgIG5hdGl2ZVByaXZhdGVEaXJ0eSA9IGVudHJpZXNbM107XG4gICAgICAgICAgbmF0aXZlSGVhcFNpemUgPSBlbnRyaWVzWzRdO1xuICAgICAgICAgIG5hdGl2ZUhlYXBBbGxvY2F0ZWRTaXplID0gZW50cmllc1s1XTtcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlID09PSAnRGFsdmlrJykge1xuICAgICAgICAgIGRhbHZpa1BzcyA9IGVudHJpZXNbMV07XG4gICAgICAgICAgZGFsdmlrUHJpdmF0ZURpcnR5ID0gZW50cmllc1szXTtcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlID09PSAnRUdMJykge1xuICAgICAgICAgIGVnbFBzcyA9IGVudHJpZXNbMV07XG4gICAgICAgICAgZWdsUHJpdmF0ZURpcnR5ID0gZW50cmllc1szXTtcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlID09PSAnR0wnKSB7XG4gICAgICAgICAgZ2xQc3MgPSBlbnRyaWVzWzFdO1xuICAgICAgICAgIGdsUHJpdmF0ZURpcnR5ID0gZW50cmllc1szXTtcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlID09PSAnVE9UQUwnKSB7XG4gICAgICAgICAgdG90YWxQc3MgPSBlbnRyaWVzWzFdO1xuICAgICAgICAgIHRvdGFsUHJpdmF0ZURpcnR5ID0gZW50cmllc1szXTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmICh0b3RhbFByaXZhdGVEaXJ0eSAmJiB0b3RhbFByaXZhdGVEaXJ0eSAhPT0gJ25vZGV4Jykge1xuICAgICAgbGV0IGhlYWRlcnMgPSBfLmNsb25lKE1FTU9SWV9LRVlTKTtcbiAgICAgIGxldCBkYXRhID0gW3RvdGFsUHJpdmF0ZURpcnR5LCBuYXRpdmVQcml2YXRlRGlydHksIGRhbHZpa1ByaXZhdGVEaXJ0eSwgZWdsUHJpdmF0ZURpcnR5LCBnbFByaXZhdGVEaXJ0eSwgdG90YWxQc3MsIG5hdGl2ZVBzcywgZGFsdmlrUHNzLCBlZ2xQc3MsIGdsUHNzLCBuYXRpdmVIZWFwQWxsb2NhdGVkU2l6ZSwgbmF0aXZlSGVhcFNpemVdO1xuICAgICAgcmV0dXJuIFtoZWFkZXJzLCBkYXRhXTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBVbmFibGUgdG8gcGFyc2UgbWVtb3J5IGRhdGE6ICcke2RhdGF9J2ApO1xuICAgIH1cbiAgfSk7XG59O1xuXG5oZWxwZXJzLmdldE5ldHdvcmtUcmFmZmljSW5mbyA9IGFzeW5jIGZ1bmN0aW9uIGdldE5ldHdvcmtUcmFmZmljSW5mbyAoZGF0YVJlYWRUaW1lb3V0ID0gMikge1xuICByZXR1cm4gYXdhaXQgcmV0cnlJbnRlcnZhbChkYXRhUmVhZFRpbWVvdXQsIFJFVFJZX1BBVVNFLCBhc3luYyAoKSA9PiB7XG4gICAgbGV0IHJldHVyblZhbHVlID0gW107XG4gICAgbGV0IGJ1Y2tldER1cmF0aW9uLCBidWNrZXRTdGFydCwgYWN0aXZlVGltZSwgcnhCeXRlcywgcnhQYWNrZXRzLCB0eEJ5dGVzLCB0eFBhY2tldHMsIG9wZXJhdGlvbnM7XG5cbiAgICBsZXQgY21kID0gWydkdW1wc3lzJywgJ25ldHN0YXRzJ107XG4gICAgbGV0IGRhdGEgPSBhd2FpdCB0aGlzLmFkYi5zaGVsbChjbWQpO1xuICAgIGlmICghZGF0YSkgdGhyb3cgbmV3IEVycm9yKCdObyBkYXRhIGZyb20gZHVtcHN5cycpOyAvL2VzbGludC1kaXNhYmxlLWxpbmUgY3VybHlcblxuICAgIC8vIEluIGNhc2Ugb2YgbmV0d29yayB0cmFmZmljIGluZm9ybWF0aW9uLCBpdCBpcyBkaWZmZXJlbnQgZm9yIHRoZSByZXR1cm4gZGF0YSBiZXR3ZWVuIGVtdWxhdG9yIGFuZCByZWFsIGRldmljZS5cbiAgICAvLyB0aGUgcmV0dXJuIGRhdGEgb2YgZW11bGF0b3JcbiAgICAvLyAgIFh0IHN0YXRzOlxuICAgIC8vICAgUGVuZGluZyBieXRlczogMzkyNTBcbiAgICAvLyAgIEhpc3Rvcnkgc2luY2UgYm9vdDpcbiAgICAvLyAgIGlkZW50PVtbdHlwZT1XSUZJLCBzdWJUeXBlPUNPTUJJTkVELCBuZXR3b3JrSWQ9XCJXaXJlZFNTSURcIl1dIHVpZD0tMSBzZXQ9QUxMIHRhZz0weDBcbiAgICAvLyAgIE5ldHdvcmtTdGF0c0hpc3Rvcnk6IGJ1Y2tldER1cmF0aW9uPTM2MDAwMDBcbiAgICAvLyAgIGJ1Y2tldFN0YXJ0PTE0NzgwOTg4MDAwMDAgYWN0aXZlVGltZT0zMTgyNCByeEJ5dGVzPTIxNTAyIHJ4UGFja2V0cz03OCB0eEJ5dGVzPTE3NzQ4IHR4UGFja2V0cz05MCBvcGVyYXRpb25zPTBcbiAgICAvL1xuICAgIC8vIDcuMVxuICAgIC8vICAgWHQgc3RhdHM6XG4gICAgLy8gICBQZW5kaW5nIGJ5dGVzOiA0ODE0ODdcbiAgICAvLyAgIEhpc3Rvcnkgc2luY2UgYm9vdDpcbiAgICAvLyAgIGlkZW50PVt7dHlwZT1NT0JJTEUsIHN1YlR5cGU9Q09NQklORUQsIHN1YnNjcmliZXJJZD0zMTAyNjAuLi4sIG1ldGVyZWQ9dHJ1ZX1dIHVpZD0tMSBzZXQ9QUxMIHRhZz0weDBcbiAgICAvLyAgICAgTmV0d29ya1N0YXRzSGlzdG9yeTogYnVja2V0RHVyYXRpb249MzYwMFxuICAgIC8vICAgICAgIHN0PTE0ODM5ODQ4MDAgcmI9MCBycD0wIHRiPTEyMDMxIHRwPTE4NCBvcD0wXG4gICAgLy8gICAgICAgc3Q9MTQ4Mzk4ODQwMCByYj0wIHJwPTAgdGI9Mzg0NzYgdHA9NTg3IG9wPTBcbiAgICAvLyAgICAgICBzdD0xNDgzOTk5MjAwIHJiPTMxNTYxNiBycD00MDAgdGI9OTQ4MDAgdHA9MzYyIG9wPTBcbiAgICAvLyAgICAgICBzdD0xNDg0MDAyODAwIHJiPTE1ODI2IHJwPTIwIHRiPTQ3MzggdHA9MTYgb3A9MFxuICAgIC8vXG4gICAgLy8gdGhlIHJldHVybiBkYXRhIG9mIHJlYWwgZGV2aWNlXG4gICAgLy8gICBYdCBzdGF0czpcbiAgICAvLyAgIFBlbmRpbmcgYnl0ZXM6IDBcbiAgICAvLyAgIEhpc3Rvcnkgc2luY2UgYm9vdDpcbiAgICAvLyAgIGlkZW50PVt7dHlwZT1NT0JJTEUsIHN1YlR5cGU9Q09NQklORUQsIHN1YnNjcmliZXJJZD00NTAwNTAuLi59XSB1aWQ9LTEgc2V0PUFMTCB0YWc9MHgwXG4gICAgLy8gICBOZXR3b3JrU3RhdHNIaXN0b3J5OiBidWNrZXREdXJhdGlvbj0zNjAwXG4gICAgLy8gICBzdD0xNDc4MDg4MDAwIHJiPTMyMTE1Mjk2IHJwPTM0MjkxIHRiPTI5NTY4MDUgdHA9MjU3MDUgb3A9MFxuICAgIC8vICAgc3Q9MTQ3ODA5MTYwMCByYj0yNzE0NjgzIHJwPTExODIxIHRiPTE0MjA1NjQgdHA9MTI2NTAgb3A9MFxuICAgIC8vICAgc3Q9MTQ3ODA5NTIwMCByYj0xMDA3OTIxMyBycD0xOTk2MiB0Yj0yNDg3NzA1IHRwPTIwMDE1IG9wPTBcbiAgICAvLyAgIHN0PTE0NzgwOTg4MDAgcmI9NDQ0NDQzMyBycD0xMDIyNyB0Yj0xNDMwMzU2IHRwPTEwNDkzIG9wPTBcbiAgICBsZXQgaW5kZXggPSAwO1xuICAgIGxldCBmcm9tWHRzdGF0cyA9IGRhdGEuaW5kZXhPZignWHQgc3RhdHM6Jyk7XG5cbiAgICBsZXQgc3RhcnQgPSBkYXRhLmluZGV4T2YoJ1BlbmRpbmcgYnl0ZXM6JywgZnJvbVh0c3RhdHMpO1xuICAgIGxldCBkZWxpbWl0ZXIgPSBkYXRhLmluZGV4T2YoJzonLCBzdGFydCArIDEpO1xuICAgIGxldCBlbmQgPSBkYXRhLmluZGV4T2YoJ1xcbicsIGRlbGltaXRlciArIDEpO1xuICAgIGxldCBwZW5kaW5nQnl0ZXMgPSBkYXRhLnN1YnN0cmluZyhkZWxpbWl0ZXIgKyAxLCBlbmQpLnRyaW0oKTtcblxuICAgIGlmIChlbmQgPiBkZWxpbWl0ZXIpIHtcbiAgICAgIHN0YXJ0ID0gZGF0YS5pbmRleE9mKCdidWNrZXREdXJhdGlvbicsIGVuZCArIDEpO1xuICAgICAgZGVsaW1pdGVyID0gZGF0YS5pbmRleE9mKCc9Jywgc3RhcnQgKyAxKTtcbiAgICAgIGVuZCA9IGRhdGEuaW5kZXhPZignXFxuJywgZGVsaW1pdGVyICsgMSk7XG4gICAgICBidWNrZXREdXJhdGlvbiA9IGRhdGEuc3Vic3RyaW5nKGRlbGltaXRlciArIDEsIGVuZCkudHJpbSgpO1xuICAgIH1cblxuICAgIGlmIChzdGFydCA+PSAwKSB7XG4gICAgICBkYXRhID0gZGF0YS5zdWJzdHJpbmcoZW5kICsgMSwgZGF0YS5sZW5ndGgpO1xuICAgICAgbGV0IGFycmF5TGlzdCA9IGRhdGEuc3BsaXQoJ1xcbicpO1xuXG4gICAgICBpZiAoYXJyYXlMaXN0Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgc3RhcnQgPSAtMTtcblxuICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IE5FVFdPUktfS0VZUy5sZW5ndGg7ICsraikge1xuICAgICAgICAgIHN0YXJ0ID0gYXJyYXlMaXN0WzBdLmluZGV4T2YoTkVUV09SS19LRVlTW2pdWzBdKTtcblxuICAgICAgICAgIGlmIChzdGFydCA+PSAwKSB7XG4gICAgICAgICAgICBpbmRleCA9IGo7XG4gICAgICAgICAgICByZXR1cm5WYWx1ZVswXSA9IFtdO1xuXG4gICAgICAgICAgICBmb3IgKGxldCBrID0gMDsgayA8IE5FVFdPUktfS0VZU1tqXS5sZW5ndGg7ICsraykge1xuICAgICAgICAgICAgICByZXR1cm5WYWx1ZVswXVtrXSA9IE5FVFdPUktfS0VZU1tqXVtrXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGxldCByZXR1cm5JbmRleCA9IDE7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYXJyYXlMaXN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgZGF0YSA9IGFycmF5TGlzdFtpXTtcbiAgICAgICAgICBzdGFydCA9IGRhdGEuaW5kZXhPZihORVRXT1JLX0tFWVNbaW5kZXhdWzBdKTtcblxuICAgICAgICAgIGlmIChzdGFydCA+PSAwKSB7XG4gICAgICAgICAgICBkZWxpbWl0ZXIgPSBkYXRhLmluZGV4T2YoJz0nLCBzdGFydCArIDEpO1xuICAgICAgICAgICAgZW5kID0gZGF0YS5pbmRleE9mKCcgJywgZGVsaW1pdGVyICsgMSk7XG4gICAgICAgICAgICBidWNrZXRTdGFydCA9IGRhdGEuc3Vic3RyaW5nKGRlbGltaXRlciArIDEsIGVuZCkudHJpbSgpO1xuXG4gICAgICAgICAgICBpZiAoZW5kID4gZGVsaW1pdGVyKSB7XG4gICAgICAgICAgICAgIHN0YXJ0ID0gZGF0YS5pbmRleE9mKE5FVFdPUktfS0VZU1tpbmRleF1bMV0sIGVuZCArIDEpO1xuICAgICAgICAgICAgICBpZiAoc3RhcnQgPj0gMCkge1xuICAgICAgICAgICAgICAgIGRlbGltaXRlciA9IGRhdGEuaW5kZXhPZignPScsIHN0YXJ0ICsgMSk7XG4gICAgICAgICAgICAgICAgZW5kID0gZGF0YS5pbmRleE9mKCcgJywgZGVsaW1pdGVyICsgMSk7XG4gICAgICAgICAgICAgICAgYWN0aXZlVGltZSA9IGRhdGEuc3Vic3RyaW5nKGRlbGltaXRlciArIDEsIGVuZCkudHJpbSgpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChlbmQgPiBkZWxpbWl0ZXIpIHtcbiAgICAgICAgICAgICAgc3RhcnQgPSBkYXRhLmluZGV4T2YoTkVUV09SS19LRVlTW2luZGV4XVsyXSwgZW5kICsgMSk7XG4gICAgICAgICAgICAgIGlmIChzdGFydCA+PSAwKSB7XG4gICAgICAgICAgICAgICAgZGVsaW1pdGVyID0gZGF0YS5pbmRleE9mKCc9Jywgc3RhcnQgKyAxKTtcbiAgICAgICAgICAgICAgICBlbmQgPSBkYXRhLmluZGV4T2YoJyAnLCBkZWxpbWl0ZXIgKyAxKTtcbiAgICAgICAgICAgICAgICByeEJ5dGVzID0gZGF0YS5zdWJzdHJpbmcoZGVsaW1pdGVyICsgMSwgZW5kKS50cmltKCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGVuZCA+IGRlbGltaXRlcikge1xuICAgICAgICAgICAgICBzdGFydCA9IGRhdGEuaW5kZXhPZihORVRXT1JLX0tFWVNbaW5kZXhdWzNdLCBlbmQgKyAxKTtcbiAgICAgICAgICAgICAgaWYgKHN0YXJ0ID49IDApIHtcbiAgICAgICAgICAgICAgICBkZWxpbWl0ZXIgPSBkYXRhLmluZGV4T2YoJz0nLCBzdGFydCArIDEpO1xuICAgICAgICAgICAgICAgIGVuZCA9IGRhdGEuaW5kZXhPZignICcsIGRlbGltaXRlciArIDEpO1xuICAgICAgICAgICAgICAgIHJ4UGFja2V0cyA9IGRhdGEuc3Vic3RyaW5nKGRlbGltaXRlciArIDEsIGVuZCkudHJpbSgpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChlbmQgPiBkZWxpbWl0ZXIpIHtcbiAgICAgICAgICAgICAgc3RhcnQgPSBkYXRhLmluZGV4T2YoTkVUV09SS19LRVlTW2luZGV4XVs0XSwgZW5kICsgMSk7XG4gICAgICAgICAgICAgIGlmIChzdGFydCA+PSAwKSB7XG4gICAgICAgICAgICAgICAgZGVsaW1pdGVyID0gZGF0YS5pbmRleE9mKCc9Jywgc3RhcnQgKyAxKTtcbiAgICAgICAgICAgICAgICBlbmQgPSBkYXRhLmluZGV4T2YoJyAnLCBkZWxpbWl0ZXIgKyAxKTtcbiAgICAgICAgICAgICAgICB0eEJ5dGVzID0gZGF0YS5zdWJzdHJpbmcoZGVsaW1pdGVyICsgMSwgZW5kKS50cmltKCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGVuZCA+IGRlbGltaXRlcikge1xuICAgICAgICAgICAgICBzdGFydCA9IGRhdGEuaW5kZXhPZihORVRXT1JLX0tFWVNbaW5kZXhdWzVdLCBlbmQgKyAxKTtcbiAgICAgICAgICAgICAgaWYgKHN0YXJ0ID49IDApIHtcbiAgICAgICAgICAgICAgICBkZWxpbWl0ZXIgPSBkYXRhLmluZGV4T2YoJz0nLCBzdGFydCArIDEpO1xuICAgICAgICAgICAgICAgIGVuZCA9IGRhdGEuaW5kZXhPZignICcsIGRlbGltaXRlciArIDEpO1xuICAgICAgICAgICAgICAgIHR4UGFja2V0cyA9IGRhdGEuc3Vic3RyaW5nKGRlbGltaXRlciArIDEsIGVuZCkudHJpbSgpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChlbmQgPiBkZWxpbWl0ZXIpIHtcbiAgICAgICAgICAgICAgc3RhcnQgPSBkYXRhLmluZGV4T2YoTkVUV09SS19LRVlTW2luZGV4XVs2XSwgZW5kICsgMSk7XG4gICAgICAgICAgICAgIGlmIChzdGFydCA+PSAwKSB7XG4gICAgICAgICAgICAgICAgZGVsaW1pdGVyID0gZGF0YS5pbmRleE9mKCc9Jywgc3RhcnQgKyAxKTtcbiAgICAgICAgICAgICAgICBlbmQgPSBkYXRhLmxlbmd0aDtcbiAgICAgICAgICAgICAgICBvcGVyYXRpb25zID0gZGF0YS5zdWJzdHJpbmcoZGVsaW1pdGVyICsgMSwgZW5kKS50cmltKCk7XG5cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuVmFsdWVbcmV0dXJuSW5kZXgrK10gPSBbYnVja2V0U3RhcnQsIGFjdGl2ZVRpbWUsIHJ4Qnl0ZXMsIHJ4UGFja2V0cywgdHhCeXRlcywgdHhQYWNrZXRzLCBvcGVyYXRpb25zLCBidWNrZXREdXJhdGlvbl07XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKCFfLmlzRXF1YWwocGVuZGluZ0J5dGVzLCAnJykgJiYgIV8uaXNVbmRlZmluZWQocGVuZGluZ0J5dGVzKSAmJiAhXy5pc0VxdWFsKHBlbmRpbmdCeXRlcywgJ25vZGV4JykpIHtcbiAgICAgIHJldHVybiByZXR1cm5WYWx1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBVbmFibGUgdG8gcGFyc2UgbmV0d29yayB0cmFmZmljIGRhdGE6ICcke2RhdGF9J2ApO1xuICAgIH1cbiAgfSk7XG59O1xuXG5PYmplY3QuYXNzaWduKGV4dGVuc2lvbnMsIGNvbW1hbmRzLCBoZWxwZXJzKTtcbmV4cG9ydCB7XG4gIGNvbW1hbmRzLCBoZWxwZXJzLCBTVVBQT1JURURfUEVSRk9STUFOQ0VfREFUQV9UWVBFUywgQ1BVX0tFWVMsIE1FTU9SWV9LRVlTLFxuICBCQVRURVJZX0tFWVMsIE5FVFdPUktfS0VZUyxcbn07XG5leHBvcnQgZGVmYXVsdCBleHRlbnNpb25zO1xuIl0sImZpbGUiOiJsaWIvY29tbWFuZHMvcGVyZm9ybWFuY2UuanMiLCJzb3VyY2VSb290IjoiLi4vLi4vLi4ifQ==
