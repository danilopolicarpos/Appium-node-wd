"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = exports.helpers = exports.commands = void 0;

var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));

var _lodash = _interopRequireDefault(require("lodash"));

var _appiumBaseDriver = require("appium-base-driver");

let commands = {},
    helpers = {},
    extensions = {};
exports.helpers = helpers;
exports.commands = commands;

helpers.getElements = function (elIds) {
  var _iteratorNormalCompletion = true;
  var _didIteratorError = false;
  var _iteratorError = undefined;

  try {
    for (var _iterator = elIds[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
      let elId = _step.value;

      if (!_lodash.default.has(this.elMap, elId)) {
        throw new _appiumBaseDriver.errors.StaleElementReferenceError();
      }
    }
  } catch (err) {
    _didIteratorError = true;
    _iteratorError = err;
  } finally {
    try {
      if (!_iteratorNormalCompletion && _iterator.return != null) {
        _iterator.return();
      }
    } finally {
      if (_didIteratorError) {
        throw _iteratorError;
      }
    }
  }

  return elIds.map(e => this.elMap[e]);
};

helpers.getElement = function (elId) {
  return this.getElements([elId])[0];
};

commands.getName = function () {
  var _ref = (0, _asyncToGenerator2.default)(function* (elementId) {
    let el = this.getElement(elementId);
    return el.tagName;
  });

  return function (_x) {
    return _ref.apply(this, arguments);
  };
}();

commands.elementDisplayed = function () {
  var _ref2 = (0, _asyncToGenerator2.default)(function* (elementId) {
    let el = this.getElement(elementId);
    return el.isVisible();
  });

  return function (_x2) {
    return _ref2.apply(this, arguments);
  };
}();

commands.elementEnabled = function () {
  var _ref3 = (0, _asyncToGenerator2.default)(function* (elementId) {
    let el = this.getElement(elementId);
    return el.isEnabled();
  });

  return function (_x3) {
    return _ref3.apply(this, arguments);
  };
}();

commands.elementSelected = function () {
  var _ref4 = (0, _asyncToGenerator2.default)(function* (elementId) {
    let el = this.getElement(elementId);
    return el.isSelected();
  });

  return function (_x4) {
    return _ref4.apply(this, arguments);
  };
}();

commands.setValue = function () {
  var _ref5 = (0, _asyncToGenerator2.default)(function* (keys, elementId) {
    let value = keys;

    if (keys instanceof Array) {
      value = keys.join("");
    }

    let el = this.getElement(elementId);

    if (el.type !== "MockInputField") {
      throw new _appiumBaseDriver.errors.InvalidElementStateError();
    }

    el.setAttr('value', value);
  });

  return function (_x5, _x6) {
    return _ref5.apply(this, arguments);
  };
}();

commands.getText = function () {
  var _ref6 = (0, _asyncToGenerator2.default)(function* (elementId) {
    let el = this.getElement(elementId);
    return el.getAttr('value');
  });

  return function (_x7) {
    return _ref6.apply(this, arguments);
  };
}();

commands.clear = function () {
  var _ref7 = (0, _asyncToGenerator2.default)(function* (elementId) {
    yield this.setValue('', elementId);
  });

  return function (_x8) {
    return _ref7.apply(this, arguments);
  };
}();

commands.click = function () {
  var _ref8 = (0, _asyncToGenerator2.default)(function* (elementId) {
    this.assertNoAlert();
    let el = this.getElement(elementId);

    if (!el.isVisible()) {
      throw new _appiumBaseDriver.errors.InvalidElementStateError();
    }

    el.click();
    this.focusedElId = elementId;
  });

  return function (_x9) {
    return _ref8.apply(this, arguments);
  };
}();

commands.getAttribute = function () {
  var _ref9 = (0, _asyncToGenerator2.default)(function* (attr, elementId) {
    let el = this.getElement(elementId);
    return el.getAttr(attr);
  });

  return function (_x10, _x11) {
    return _ref9.apply(this, arguments);
  };
}();

commands.getLocation = function (elementId) {
  let el = this.getElement(elementId);
  return el.getLocation();
};

commands.getSize = function (elementId) {
  let el = this.getElement(elementId);
  return el.getSize();
};

commands.equalsElement = function (el1Id, el2Id) {
  let el1 = this.getElement(el1Id);
  let el2 = this.getElement(el2Id);
  return el1.equals(el2);
};

commands.getLocationInView = commands.getLocation;

commands.getCssProperty = function () {
  var _ref10 = (0, _asyncToGenerator2.default)(function* (prop, elementId) {
    this.assertWebviewContext();
    let el = this.getElement(elementId);
    return el.getCss(prop);
  });

  return function (_x12, _x13) {
    return _ref10.apply(this, arguments);
  };
}();

Object.assign(extensions, commands, helpers);
var _default = extensions;
exports.default = _default;require('source-map-support').install();


//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxpYi9jb21tYW5kcy9lbGVtZW50LmpzIl0sIm5hbWVzIjpbImNvbW1hbmRzIiwiaGVscGVycyIsImV4dGVuc2lvbnMiLCJnZXRFbGVtZW50cyIsImVsSWRzIiwiZWxJZCIsIl8iLCJoYXMiLCJlbE1hcCIsImVycm9ycyIsIlN0YWxlRWxlbWVudFJlZmVyZW5jZUVycm9yIiwibWFwIiwiZSIsImdldEVsZW1lbnQiLCJnZXROYW1lIiwiZWxlbWVudElkIiwiZWwiLCJ0YWdOYW1lIiwiZWxlbWVudERpc3BsYXllZCIsImlzVmlzaWJsZSIsImVsZW1lbnRFbmFibGVkIiwiaXNFbmFibGVkIiwiZWxlbWVudFNlbGVjdGVkIiwiaXNTZWxlY3RlZCIsInNldFZhbHVlIiwia2V5cyIsInZhbHVlIiwiQXJyYXkiLCJqb2luIiwidHlwZSIsIkludmFsaWRFbGVtZW50U3RhdGVFcnJvciIsInNldEF0dHIiLCJnZXRUZXh0IiwiZ2V0QXR0ciIsImNsZWFyIiwiY2xpY2siLCJhc3NlcnROb0FsZXJ0IiwiZm9jdXNlZEVsSWQiLCJnZXRBdHRyaWJ1dGUiLCJhdHRyIiwiZ2V0TG9jYXRpb24iLCJnZXRTaXplIiwiZXF1YWxzRWxlbWVudCIsImVsMUlkIiwiZWwySWQiLCJlbDEiLCJlbDIiLCJlcXVhbHMiLCJnZXRMb2NhdGlvbkluVmlldyIsImdldENzc1Byb3BlcnR5IiwicHJvcCIsImFzc2VydFdlYnZpZXdDb250ZXh0IiwiZ2V0Q3NzIiwiT2JqZWN0IiwiYXNzaWduIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFBOztBQUNBOztBQUVBLElBQUlBLFFBQVEsR0FBRyxFQUFmO0FBQUEsSUFBbUJDLE9BQU8sR0FBRyxFQUE3QjtBQUFBLElBQWlDQyxVQUFVLEdBQUcsRUFBOUM7Ozs7QUFFQUQsT0FBTyxDQUFDRSxXQUFSLEdBQXNCLFVBQVVDLEtBQVYsRUFBaUI7QUFBQTtBQUFBO0FBQUE7O0FBQUE7QUFDckMseUJBQWlCQSxLQUFqQiw4SEFBd0I7QUFBQSxVQUFmQyxJ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QUFDQSxNQUFJRyxHQUFHLEdBQUcsS0FBS2pDLFVBQUwsQ0FBZ0IrQixLQUFoQixDQUFWO0FBQ0EsU0FBT0MsR0FBRyxDQUFDRSxNQUFKLENBQVdELEdBQVgsQ0FBUDtBQUNELENBSkQ7O0FBTUE5QyxRQUFRLENBQUNnRCxpQkFBVCxHQUE2QmhELFFBQVEsQ0FBQ3dDLFdBQXRDOztBQUVBeEMsUUFBUSxDQUFDaUQsY0FBVDtBQUFBLCtDQUEwQixXQUFnQkMsSUFBaEIsRUFBc0JuQyxTQUF0QixFQUFpQztBQUN6RCxTQUFLb0Msb0JBQUw7QUFDQSxRQUFJbkMsRUFBRSxHQUFHLEtBQUtILFVBQUwsQ0FBZ0JFLFNBQWhCLENBQVQ7QUFDQSxXQUFPQyxFQUFFLENBQUNvQyxNQUFILENBQVVGLElBQVYsQ0FBUDtBQUNELEdBSkQ7O0FBQUE7QUFBQTtBQUFBO0FBQUE7O0FBTUFHLE1BQU0sQ0FBQ0MsTUFBUCxDQUFjcEQsVUFBZCxFQUEwQkYsUUFBMUIsRUFBb0NDLE9BQXBDO2VBRWVDLFUiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgXyBmcm9tICdsb2Rhc2gnO1xuaW1wb3J0IHsgZXJyb3JzIH0gZnJvbSAnYXBwaXVtLWJhc2UtZHJpdmVyJztcblxubGV0IGNvbW1hbmRzID0ge30sIGhlbHBlcnMgPSB7fSwgZXh0ZW5zaW9ucyA9IHt9O1xuXG5oZWxwZXJzLmdldEVsZW1lbnRzID0gZnVuY3Rpb24gKGVsSWRzKSB7XG4gIGZvciAobGV0IGVsSWQgb2YgZWxJZHMpIHtcbiAgICBpZiAoIV8uaGFzKHRoaXMuZWxNYXAsIGVsSWQpKSB7XG4gICAgICB0aHJvdyBuZXcgZXJyb3JzLlN0YWxlRWxlbWVudFJlZmVyZW5jZUVycm9yKCk7XG4gICAgfVxuICB9XG4gIHJldHVybiBlbElkcy5tYXAoKGUpID0+IHRoaXMuZWxNYXBbZV0pO1xufTtcblxuaGVscGVycy5nZXRFbGVtZW50ID0gZnVuY3Rpb24gKGVsSWQpIHtcbiAgcmV0dXJuIHRoaXMuZ2V0RWxlbWVudHMoW2VsSWRdKVswXTtcbn07XG5cbmNvbW1hbmRzLmdldE5hbWUgPSBhc3luYyBmdW5jdGlvbiAoZWxlbWVudElkKSB7XG4gIGxldCBlbCA9IHRoaXMuZ2V0RWxlbWVudChlbGVtZW50SWQpO1xuICByZXR1cm4gZWwudGFnTmFtZTtcbn07XG5cbmNvbW1hbmRzLmVsZW1lbnREaXNwbGF5ZWQgPSBhc3luYyBmdW5jdGlvbiAoZWxlbWVudElkKSB7XG4gIGxldCBlbCA9IHRoaXMuZ2V0RWxlbWVudChlbGVtZW50SWQpO1xuICByZXR1cm4gZWwuaXNWaXNpYmxlKCk7XG59O1xuXG5jb21tYW5kcy5lbGVtZW50RW5hYmxlZCA9IGFzeW5jIGZ1bmN0aW9uIChlbGVtZW50SWQpIHtcbiAgbGV0IGVsID0gdGhpcy5nZXRFbGVtZW50KGVsZW1lbnRJZCk7XG4gIHJldHVybiBlbC5pc0VuYWJsZWQoKTtcbn07XG5cbmNvbW1hbmRzLmVsZW1lbnRTZWxlY3RlZCA9IGFzeW5jIGZ1bmN0aW9uIChlbGVtZW50SWQpIHtcbiAgbGV0IGVsID0gdGhpcy5nZXRFbGVtZW50KGVsZW1lbnRJZCk7XG4gIHJldHVybiBlbC5pc1NlbGVjdGVkKCk7XG59O1xuXG5jb21tYW5kcy5zZXRWYWx1ZSA9IGFzeW5jIGZ1bmN0aW9uIChrZXlzLCBlbGVtZW50SWQpIHtcbiAgbGV0IHZhbHVlID0ga2V5cztcbiAgaWYgKGtleXMgaW5zdGFuY2VvZiBBcnJheSkge1xuICAgIHZhbHVlID0ga2V5cy5qb2luKFwiXCIpO1xuICB9XG4gIGxldCBlbCA9IHRoaXMuZ2V0RWxlbWVudChlbGVtZW50SWQpO1xuICBpZiAoZWwudHlwZSAhPT0gXCJNb2NrSW5wdXRGaWVsZFwiKSB7XG4gICAgdGhyb3cgbmV3IGVycm9ycy5JbnZhbGlkRWxlbWVudFN0YXRlRXJyb3IoKTtcbiAgfVxuICBlbC5zZXRBdHRyKCd2YWx1ZScsIHZhbHVlKTtcbn07XG5cbmNvbW1hbmRzLmdldFRleHQgPSBhc3luYyBmdW5jdGlvbiAoZWxlbWVudElkKSB7XG4gIGxldCBlbCA9IHRoaXMuZ2V0RWxlbWVudChlbGVtZW50SWQpO1xuICByZXR1cm4gZWwuZ2V0QXR0cigndmFsdWUnKTtcbn07XG5cbmNvbW1hbmRzLmNsZWFyID0gYXN5bmMgZnVuY3Rpb24gKGVsZW1lbnRJZCkge1xuICBhd2FpdCB0aGlzLnNldFZhbHVlKCcnLCBlbGVtZW50SWQpO1xufTtcblxuY29tbWFuZHMuY2xpY2sgPSBhc3luYyBmdW5jdGlvbiAoZWxlbWVudElkKSB7XG4gIHRoaXMuYXNzZXJ0Tm9BbGVydCgpO1xuICBsZXQgZWwgPSB0aGlzLmdldEVsZW1lbnQoZWxlbWVudElkKTtcbiAgaWYgKCFlbC5pc1Zpc2libGUoKSkge1xuICAgIHRocm93IG5ldyBlcnJvcnMuSW52YWxpZEVsZW1lbnRTdGF0ZUVycm9yKCk7XG4gIH1cbiAgZWwuY2xpY2soKTtcbiAgdGhpcy5mb2N1c2VkRWxJZCA9IGVsZW1lbnRJZDtcbn07XG5cbmNvbW1hbmRzLmdldEF0dHJpYnV0ZSA9IGFzeW5jIGZ1bmN0aW9uIChhdHRyLCBlbGVtZW50SWQpIHtcbiAgbGV0IGVsID0gdGhpcy5nZXRFbGVtZW50KGVsZW1lbnRJZCk7XG4gIHJldHVybiBlbC5nZXRBdHRyKGF0dHIpO1xufTtcblxuY29tbWFuZHMuZ2V0TG9jYXRpb24gPSBmdW5jdGlvbiAoZWxlbWVudElkKSB7XG4gIGxldCBlbCA9IHRoaXMuZ2V0RWxlbWVudChlbGVtZW50SWQpO1xuICByZXR1cm4gZWwuZ2V0TG9jYXRpb24oKTtcbn07XG5cbmNvbW1hbmRzLmdldFNpemUgPSBmdW5jdGlvbiAoZWxlbWVudElkKSB7XG4gIGxldCBlbCA9IHRoaXMuZ2V0RWxlbWVudChlbGVtZW50SWQpO1xuICByZXR1cm4gZWwuZ2V0U2l6ZSgpO1xufTtcblxuY29tbWFuZHMuZXF1YWxzRWxlbWVudCA9IGZ1bmN0aW9uIChlbDFJZCwgZWwySWQpIHtcbiAgbGV0IGVsMSA9IHRoaXMuZ2V0RWxlbWVudChlbDFJZCk7XG4gIGxldCBlbDIgPSB0aGlzLmdldEVsZW1lbnQoZWwySWQpO1xuICByZXR1cm4gZWwxLmVxdWFscyhlbDIpO1xufTtcblxuY29tbWFuZHMuZ2V0TG9jYXRpb25JblZpZXcgPSBjb21tYW5kcy5nZXRMb2NhdGlvbjtcblxuY29tbWFuZHMuZ2V0Q3NzUHJvcGVydHkgPSBhc3luYyBmdW5jdGlvbiAocHJvcCwgZWxlbWVudElkKSB7XG4gIHRoaXMuYXNzZXJ0V2Vidmlld0NvbnRleHQoKTtcbiAgbGV0IGVsID0gdGhpcy5nZXRFbGVtZW50KGVsZW1lbnRJZCk7XG4gIHJldHVybiBlbC5nZXRDc3MocHJvcCk7XG59O1xuXG5PYmplY3QuYXNzaWduKGV4dGVuc2lvbnMsIGNvbW1hbmRzLCBoZWxwZXJzKTtcbmV4cG9ydCB7IGNvbW1hbmRzLCBoZWxwZXJzIH07XG5leHBvcnQgZGVmYXVsdCBleHRlbnNpb25zO1xuIl0sImZpbGUiOiJsaWIvY29tbWFuZHMvZWxlbWVudC5qcyIsInNvdXJjZVJvb3QiOiIuLi8uLi8uLiJ9
