"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

require("source-map-support/register");

var _appiumBaseDriver = require("appium-base-driver");

var _utils = require("../utils");

let commands = {};

commands.click = async function (el) {
  let retVal = await this.tapEl(el);
  return retVal;
};

commands.tapEl = async function (el, longPress) {
  el = (0, _utils.unwrapEl)(el);
  let commandName = 'tap';

  if (longPress) {
    commandName = 'longpress';
  }

  let commandObject = {
    name: commandName,
    args: [`${el}`]
  };
  let commandJSON = JSON.stringify(commandObject);
  let data = await this.executeSocketCommand(commandJSON);
  let result;

  try {
    result = JSON.parse(data);
  } catch (e) {
    throw new Error('Bad response from click');
  }

  if (result.status === _utils.youiEngineDriverReturnValues.WEBDRIVER_STALE_ELEMENT) {
    throw new _appiumBaseDriver.errors.StaleElementReferenceError(result.value);
  }

  return result.value;
};

commands.tapElXY = async function (el, x, y, longPress) {
  el = (0, _utils.unwrapEl)(el);
  let commandName = 'tap';

  if (longPress) {
    commandName = 'longpress';
  }

  let commandObject = {
    name: commandName,
    args: [`${el}`, `${x}`, `${y}`]
  };
  let commandJSON = JSON.stringify(commandObject);
  let data = await this.executeSocketCommand(commandJSON);
  let result;

  try {
    result = JSON.parse(data);
  } catch (e) {
    throw new Error('Bad response from tapElXY');
  }

  if (result.status === _utils.youiEngineDriverReturnValues.WEBDRIVER_UNKNOWN_COMMAND) {
    throw new _appiumBaseDriver.errors.UnknownCommandError(result.value);
  } else if (result.status === _utils.youiEngineDriverReturnValues.WEBDRIVER_NO_SUCH_ELEMENT) {
    throw new _appiumBaseDriver.errors.NoSuchElementError(result.value);
  } else if (result.status === _utils.youiEngineDriverReturnValues.WEBDRIVER_STALE_ELEMENT) {
    throw new _appiumBaseDriver.errors.StaleElementReferenceError(result.value);
  }

  return result.value;
};

commands.tapXY = async function (x, y, longPress) {
  let commandName = 'tap';

  if (longPress === true) {
    commandName = 'longpress';
  }

  let commandObject = {
    name: commandName,
    args: [`${x}`, `${y}`]
  };
  let commandJSON = JSON.stringify(commandObject);
  let data = await this.executeSocketCommand(commandJSON);
  let result;

  try {
    result = JSON.parse(data);
  } catch (e) {
    throw new Error('Bad response from tapXY');
  }

  if (result.status === _utils.youiEngineDriverReturnValues.WEBDRIVER_STALE_ELEMENT) {
    throw new _appiumBaseDriver.errors.StaleElementReferenceError(result.value);
  }

  return result.value;
};

commands.tap = async function (gestures, longPress) {
  let elementId = gestures[0].options.element;
  let x = gestures[0].options.x;
  let y = gestures[0].options.y;

  if (elementId) {
    if (x && y) {
      await this.tapElXY(elementId, x, y, longPress);
    } else {
      await this.tapEl(elementId, longPress);
    }
  } else {
    await this.tapXY(x, y, longPress);
  }
};

commands.doSwipe = async function (gestures, longPress) {
  let press = gestures[0];
  let moveTo = gestures[1];
  let startX = press.options.x || 0,
      startY = press.options.y || 0,
      deltaX = moveTo.options.x || 0,
      deltaY = moveTo.options.y || 0;

  if (press.options.element) {
    let {
      x,
      y
    } = await this.getLocation(press.options.element);
    let {
      width,
      height
    } = await this.getSize(press.options.element);

    if (!press.options.x && !press.options.y && width && height) {
      startX += width / 2;
      startY += height / 2;
    }

    startX += x || 0;
    startY += y || 0;
  }

  if (moveTo.options.element) {
    let {
      x,
      y
    } = await this.getLocation(moveTo.options.element);
    let {
      width,
      height
    } = await this.getSize(moveTo.options.element);
    deltaX += x || 0;
    deltaY += y || 0;

    if (!moveTo.options.x && !moveTo.options.y && width && height) {
      deltaX += width / 2;
      deltaY += height / 2;
    }
  }

  let commandName = 'swipe';

  if (longPress === true) {
    commandName = 'longpressswipe';
  }

  let commandObject = {
    name: commandName,
    args: [`${startX}`, `${startY}`, `${deltaX}`, `${deltaY}`]
  };
  let commandJSON = JSON.stringify(commandObject);
  let data = await this.executeSocketCommand(commandJSON);
  let result;

  try {
    result = JSON.parse(data);
  } catch (e) {
    throw new Error('Bad response from doSwipe');
  }

  if (result.status === _utils.youiEngineDriverReturnValues.WEBDRIVER_STALE_ELEMENT) {
    throw new _appiumBaseDriver.errors.StaleElementReferenceError(result.value);
  }

  return result.value;
};

commands.performTouch = async function (gestures) {
  if (gestures.length === 3) {
    if (gestures[0].action === 'press' && gestures[1].action === 'moveTo' && gestures[2].action === 'release') {
      return await this.doSwipe(gestures, false);
    } else if (gestures[0].action === 'longPress' && gestures[1].action === 'moveTo' && gestures[2].action === 'release') {
      return await this.doSwipe(gestures, true);
    }
  } else if (gestures.length === 2) {
    if (gestures[0].action === 'press' && gestures[1].action === 'release') {
      return await this.tap(gestures, false);
    } else if (gestures[0].action === 'longPress' && gestures[1].action === 'release') {
      return await this.tap(gestures, true);
    }
  } else if (gestures.length === 1) {
    if (gestures[0].action === 'tap') {
      return await this.tap(gestures, false);
    }
  }
};

var _default = commands;
exports.default = _default;require('source-map-support').install();


//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxpYi9jb21tYW5kcy9nZXN0dXJlLmpzIl0sIm5hbWVzIjpbImNvbW1hbmRzIiwiY2xpY2siLCJlbCIsInJldFZhbCIsInRhcEVsIiwibG9uZ1ByZXNzIiwiY29tbWFuZE5hbWUiLCJjb21tYW5kT2JqZWN0IiwibmFtZSIsImFyZ3MiLCJjb21tYW5kSlNPTiIsIkpTT04iLCJzdHJpbmdpZnkiLCJkYXRhIiwiZXhlY3V0ZVNvY2tldENvbW1hbmQiLCJyZXN1bHQiLCJwYXJzZSIsImUiLCJFcnJvciIsInN0YXR1cyIsInlvdWlFbmdpbmVEcml2ZXJSZXR1cm5WYWx1ZXMiLCJXRUJEUklWRVJfU1RBTEVfRUxFTUVOVCIsImVycm9ycyIsIlN0YWxlRWxlbWVudFJlZmVyZW5jZUVycm9yIiwidmFsdWUiLCJ0YXBFbFhZIiwieCIsInkiLCJXRUJEUklWRVJfVU5LTk9XTl9DT01NQU5EIiwiVW5rbm93bkNvbW1hbmRFcnJvciIsIldFQkRSSVZFUl9OT19TVUNIX0VMRU1FTlQiLCJOb1N1Y2hFbGVtZW50RXJyb3IiLCJ0YXBYWSIsInRhcCIsImdlc3R1cmVzIiwiZWxlbWVudElkIiwib3B0aW9ucyIsImVsZW1lbnQiLCJkb1N3aXBlIiwicHJlc3MiLCJtb3ZlVG8iLCJzdGFydFgiLCJzdGFydFkiLCJkZWx0YVgiLCJkZWx0YVkiLCJnZXRMb2NhdGlvbiIsIndpZHRoIiwiaGVpZ2h0IiwiZ2V0U2l6ZSIsInBlcmZvcm1Ub3VjaCIsImxlbmd0aCIsImFjdGlvbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQUE7O0FBQ0E7O0FBRUEsSUFBSUEsUUFBUSxHQUFHLEVBQWY7O0FBRUFBLFFBQVEsQ0FBQ0MsS0FBVCxHQUFpQixnQkFBZ0JDLEVBQWhCLEVBQW9CO0FBQ25DLE1BQUlDLE1BQU0sR0FBRyxNQUFNLEtBQUtDLEtBQUwsQ0FBV0YsRUFBWCxDQUFuQjtBQUNBLFNBQU9DLE1BQVA7QUFDRCxDQUhEOztBQUtBSCxRQUFRLENBQUNJLEtBQVQsR0FBaUIsZ0JBQWdCRixF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LEtBQUtsQixHQUFMLENBQVNDLFFBQVQsRUFBbUIsS0FBbkIsQ0FBYjtBQUNEO0FBQ0Y7QUFDRixDQTdCRDs7ZUErQmVsQyxRIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZXJyb3JzIH0gZnJvbSAnYXBwaXVtLWJhc2UtZHJpdmVyJztcbmltcG9ydCB7IHVud3JhcEVsLCB5b3VpRW5naW5lRHJpdmVyUmV0dXJuVmFsdWVzIH0gZnJvbSAnLi4vdXRpbHMnO1xuXG5sZXQgY29tbWFuZHMgPSB7fTtcblxuY29tbWFuZHMuY2xpY2sgPSBhc3luYyBmdW5jdGlvbiAoZWwpIHtcbiAgbGV0IHJldFZhbCA9IGF3YWl0IHRoaXMudGFwRWwoZWwpO1xuICByZXR1cm4gcmV0VmFsO1xufTtcblxuY29tbWFuZHMudGFwRWwgPSBhc3luYyBmdW5jdGlvbiAoZWwsIGxvbmdQcmVzcykge1xuXG4gIC8vIHBlcmZvcm0gYSB0YXAgb24gdGhlIGdpdmVuIGVsZW1lbnRcbiAgLy8gaWYgbG9uZ1ByZXNzIGlzIHRydWUsIHRoZSB0YXAgYmVjb21lcyBhIGxvbmdQcmVzcyBhY3Rpb25cblxuICBlbCA9IHVud3JhcEVsKGVsKTtcblxuICBsZXQgY29tbWFuZE5hbWUgPSAndGFwJztcbiAgaWYgKGxvbmdQcmVzcykge1xuICAgIGNvbW1hbmROYW1lID0gJ2xvbmdwcmVzcyc7XG4gIH1cblxuICBsZXQgY29tbWFuZE9iamVjdCA9IHtcbiAgICBuYW1lOiBjb21tYW5kTmFtZSxcbiAgICBhcmdzOiBbYCR7ZWx9YF1cbiAgfTtcbiAgbGV0IGNvbW1hbmRKU09OID0gSlNPTi5zdHJpbmdpZnkoY29tbWFuZE9iamVjdCk7XG5cbiAgbGV0IGRhdGEgPSBhd2FpdCB0aGlzLmV4ZWN1dGVTb2NrZXRDb21tYW5kKGNvbW1hbmRKU09OKTtcblxuICBsZXQgcmVzdWx0O1xuICB0cnkge1xuICAgIHJlc3VsdCA9IEpTT04ucGFyc2UoZGF0YSk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0JhZCByZXNwb25zZSBmcm9tIGNsaWNrJyk7XG4gIH1cblxuICAvLyBnZXQgc3RhdHVzIHJldHVybmVkXG4gIGlmIChyZXN1bHQuc3RhdHVzID09PSB5b3VpRW5naW5lRHJpdmVyUmV0dXJuVmFsdWVzLldFQkRSSVZFUl9TVEFMRV9FTEVNRU5UKSB7XG4gICAgdGhyb3cgbmV3IGVycm9ycy5TdGFsZUVsZW1lbnRSZWZlcmVuY2VFcnJvcihyZXN1bHQudmFsdWUpO1xuICB9XG5cbiAgcmV0dXJuIHJlc3VsdC52YWx1ZTtcbn07XG5cbmNvbW1hbmRzLnRhcEVsWFkgPSBhc3luYyBmdW5jdGlvbiAoZWwsIHgsIHksIGxvbmdQcmVzcykge1xuXG4gIC8vIHBlcmZvcm0gYSB0YXAgb24gdGhlIGdpdmVuIGVsZW1lbnQgYXQgdGhlIGdpdmVuIHgseSBvZmZzZXRcbiAgLy8gaWYgbG9uZ1ByZXNzIGlzIHRydWUsIHRoZSB0YXAgYmVjb21lcyBhIGxvbmdQcmVzcyBhY3Rpb25cblxuICBlbCA9IHVud3JhcEVsKGVsKTtcblxuICBsZXQgY29tbWFuZE5hbWUgPSAndGFwJztcbiAgaWYgKGxvbmdQcmVzcykge1xuICAgIGNvbW1hbmROYW1lID0gJ2xvbmdwcmVzcyc7XG4gIH1cblxuICBsZXQgY29tbWFuZE9iamVjdCA9IHtcbiAgICBuYW1lOiBjb21tYW5kTmFtZSxcbiAgICBhcmdzOiBbYCR7ZWx9YCwgYCR7eH1gLCBgJHt5fWBdXG4gIH07XG5cbiAgbGV0IGNvbW1hbmRKU09OID0gSlNPTi5zdHJpbmdpZnkoY29tbWFuZE9iamVjdCk7XG4gIGxldCBkYXRhID0gYXdhaXQgdGhpcy5leGVjdXRlU29ja2V0Q29tbWFuZChjb21tYW5kSlNPTik7XG5cbiAgbGV0IHJlc3VsdDtcbiAgdHJ5IHtcbiAgICByZXN1bHQgPSBKU09OLnBhcnNlKGRhdGEpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdCYWQgcmVzcG9uc2UgZnJvbSB0YXBFbFhZJyk7XG4gIH1cblxuICBpZiAocmVzdWx0LnN0YXR1cyA9PT0geW91aUVuZ2luZURyaXZlclJldHVyblZhbHVlcy5XRUJEUklWRVJfVU5LTk9XTl9DT01NQU5EKSB7XG4gICAgdGhyb3cgbmV3IGVycm9ycy5Vbmtub3duQ29tbWFuZEVycm9yKHJlc3VsdC52YWx1ZSk7XG4gIH0gZWxzZSBpZiAocmVzdWx0LnN0YXR1cyA9PT0geW91aUVuZ2luZURyaXZlclJldHVyblZhbHVlcy5XRUJEUklWRVJfTk9fU1VDSF9FTEVNRU5UKSB7XG4gICAgdGhyb3cgbmV3IGVycm9ycy5Ob1N1Y2hFbGVtZW50RXJyb3IocmVzdWx0LnZhbHVlKTtcbiAgfSBlbHNlIGlmIChyZXN1bHQuc3RhdHVzID09PSB5b3VpRW5naW5lRHJpdmVyUmV0dXJuVmFsdWVzLldFQkRSSVZFUl9TVEFMRV9FTEVNRU5UKSB7XG4gICAgdGhyb3cgbmV3IGVycm9ycy5TdGFsZUVsZW1lbnRSZWZlcmVuY2VFcnJvcihyZXN1bHQudmFsdWUpO1xuICB9XG5cbiAgcmV0dXJuIHJlc3VsdC52YWx1ZTtcbn07XG5cbmNvbW1hbmRzLnRhcFhZID0gYXN5bmMgZnVuY3Rpb24gKHgsIHksIGxvbmdQcmVzcykge1xuXG4gIC8vIHBlcmZvcm0gYSB0YXAgYXQgdGhlIGdpdmVuIHgseSBzY3JlZW4gY29vcmRpbmF0ZVxuICAvLyBpZiBsb25nUHJlc3MgaXMgdHJ1ZSwgdGhlIHRhcCBiZWNvbWVzIGEgbG9uZ1ByZXNzIGFjdGlvblxuXG4gIGxldCBjb21tYW5kTmFtZSA9ICd0YXAnO1xuICBpZiAobG9uZ1ByZXNzID09PSB0cnVlKSB7XG4gICAgY29tbWFuZE5hbWUgPSAnbG9uZ3ByZXNzJztcbiAgfVxuXG4gIGxldCBjb21tYW5kT2JqZWN0ID0ge1xuICAgIG5hbWU6IGNvbW1hbmROYW1lLFxuICAgIGFyZ3M6IFtgJHt4fWAsIGAke3l9YF1cbiAgfTtcblxuICBsZXQgY29tbWFuZEpTT04gPSBKU09OLnN0cmluZ2lmeShjb21tYW5kT2JqZWN0KTtcbiAgbGV0IGRhdGEgPSBhd2FpdCB0aGlzLmV4ZWN1dGVTb2NrZXRDb21tYW5kKGNvbW1hbmRKU09OKTtcblxuICBsZXQgcmVzdWx0O1xuICB0cnkge1xuICAgIHJlc3VsdCA9IEpTT04ucGFyc2UoZGF0YSk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0JhZCByZXNwb25zZSBmcm9tIHRhcFhZJyk7XG4gIH1cblxuICAvLyBnZXQgc3RhdHVzIHJldHVybmVkXG4gIGlmIChyZXN1bHQuc3RhdHVzID09PSB5b3VpRW5naW5lRHJpdmVyUmV0dXJuVmFsdWVzLldFQkRSSVZFUl9TVEFMRV9FTEVNRU5UKSB7XG4gICAgdGhyb3cgbmV3IGVycm9ycy5TdGFsZUVsZW1lbnRSZWZlcmVuY2VFcnJvcihyZXN1bHQudmFsdWUpO1xuICB9XG5cbiAgcmV0dXJuIHJlc3VsdC52YWx1ZTtcbn07XG5cbmNvbW1hbmRzLnRhcCA9IGFzeW5jIGZ1bmN0aW9uIChnZXN0dXJlcywgbG9uZ1ByZXNzKSB7XG5cbiAgLy8gcGFyc2UgdGhlIGdpdmVuIGdlc3R1cmVzIGFycmF5IHRvIGNhbGwgdGhlIGFwcHJvcHJpYXRlIHRhcCBtZXRob2RcbiAgLy8gaWYgbG9uZ1ByZXNzIGlzIHRydWUsIHRoZSB0YXAgaXMgYSBsb25nIHByZXNzIGFjdGlvblxuXG4gIGxldCBlbGVtZW50SWQgPSBnZXN0dXJlc1swXS5vcHRpb25zLmVsZW1lbnQ7XG4gIGxldCB4ID0gZ2VzdHVyZXNbMF0ub3B0aW9ucy54O1xuICBsZXQgeSA9IGdlc3R1cmVzWzBdLm9wdGlvbnMueTtcblxuICBpZiAoZWxlbWVudElkKSB7XG5cbiAgICAvLyB3ZSBhcmUgZWl0aGVyIHRhcHBpbmcgb24gdGhlIGRlZmF1bHQgbG9jYXRpb24gb2YgdGhlIGVsZW1lbnRcbiAgICAvLyB0b3AgbGVmdCBoYXMgYmVlbiBzcGVjaWZpZWQgb2YgdGhlIGVsZW1lbnQgaGFzIGJlZW4gc3BlY2lmaWVkXG5cbiAgICBpZiAoeCAmJiB5KSB7XG4gICAgICBhd2FpdCB0aGlzLnRhcEVsWFkoZWxlbWVudElkLCB4LCB5LCBsb25nUHJlc3MpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyB0YXBwaW5nIHdpdGggYW4gZWxlbWVudCBwYXJhbWV0ZXIgaXMgdGhlIHNhbWUgYXMgY2xpY2sgb24gYSBXZWJFbGVtZW50XG4gICAgICBhd2FpdCB0aGlzLnRhcEVsKGVsZW1lbnRJZCwgbG9uZ1ByZXNzKTtcbiAgICB9XG4gIH0gZWxzZSB7XG5cbiAgICAvLyB3ZSBhcmUgdGFwcGluZyBhdCBhbiBhYnNvbHV0ZSB4LHkgY29vcmRpbmF0ZSBvbiB0aGUgc2NyZWVuXG4gICAgYXdhaXQgdGhpcy50YXBYWSh4LCB5LCBsb25nUHJlc3MpO1xuICB9XG59O1xuXG5jb21tYW5kcy5kb1N3aXBlID0gYXN5bmMgZnVuY3Rpb24gKGdlc3R1cmVzLCBsb25nUHJlc3MpIHtcblxuICAvLyBwYXJzZSBpbnB1dCB2YWx1ZXNcbiAgbGV0IHByZXNzID0gZ2VzdHVyZXNbMF07XG4gIGxldCBtb3ZlVG8gPSBnZXN0dXJlc1sxXTtcbiAgbGV0IHN0YXJ0WCA9IHByZXNzLm9wdGlvbnMueCB8fCAwLFxuICAgICAgc3RhcnRZID0gcHJlc3Mub3B0aW9ucy55IHx8IDAsXG4gICAgICBkZWx0YVggPSBtb3ZlVG8ub3B0aW9ucy54IHx8IDAsXG4gICAgICBkZWx0YVkgPSBtb3ZlVG8ub3B0aW9ucy55IHx8IDA7XG5cbiAgaWYgKHByZXNzLm9wdGlvbnMuZWxlbWVudCkge1xuICAgIGxldCB7eCwgeX0gPSBhd2FpdCB0aGlzLmdldExvY2F0aW9uKHByZXNzLm9wdGlvbnMuZWxlbWVudCk7XG4gICAgbGV0IHt3aWR0aCwgaGVpZ2h0fSA9IGF3YWl0IHRoaXMuZ2V0U2l6ZShwcmVzcy5vcHRpb25zLmVsZW1lbnQpO1xuXG4gICAgLy8gVXNlIHRoZSBtaWRkbGUgb2YgdGhlIGVsZW1lbnQgdG8gcHJlc3Mgb24sIHVubGVzcyBhbiBvZmZzZXQgZnJvbVxuICAgIC8vIHRvcCBsZWZ0IG9mIHRoZSBlbGVtZW50IGhhcyBiZWVuIHNwZWNpZmllZFxuICAgIGlmICghcHJlc3Mub3B0aW9ucy54ICYmICFwcmVzcy5vcHRpb25zLnkgJiYgd2lkdGggJiYgaGVpZ2h0KSB7XG4gICAgICBzdGFydFggKz0gd2lkdGggLyAyO1xuICAgICAgc3RhcnRZICs9IGhlaWdodCAvIDI7XG4gICAgfVxuXG4gICAgc3RhcnRYICs9IHggfHwgMDtcbiAgICBzdGFydFkgKz0geSB8fCAwO1xuXG4gIH1cblxuICBpZiAobW92ZVRvLm9wdGlvbnMuZWxlbWVudCkge1xuICAgIGxldCB7eCwgeX0gPSBhd2FpdCB0aGlzLmdldExvY2F0aW9uKG1vdmVUby5vcHRpb25zLmVsZW1lbnQpO1xuICAgIGxldCB7d2lkdGgsIGhlaWdodH0gPSBhd2FpdCB0aGlzLmdldFNpemUobW92ZVRvLm9wdGlvbnMuZWxlbWVudCk7XG4gICAgZGVsdGFYICs9IHggfHwgMDtcbiAgICBkZWx0YVkgKz0geSB8fCAwO1xuXG4gICAgLy8gVXNlIHRoZSBtaWRkbGUgb2YgdGhlIGVsZW1lbnQgdG8gbW92ZSB0bywgdW5sZXNzIGFuIG9mZnNldCBmcm9tXG4gICAgLy8gdG9wIGxlZnQgb2YgdGhlIGVsZW1lbnQgaGFzIGJlZW4gc3BlY2lmaWVkXG4gICAgaWYgKCFtb3ZlVG8ub3B0aW9ucy54ICYmICFtb3ZlVG8ub3B0aW9ucy55ICYmIHdpZHRoICYmIGhlaWdodCkge1xuICAgICAgZGVsdGFYICs9IHdpZHRoIC8gMjtcbiAgICAgIGRlbHRhWSArPSBoZWlnaHQgLyAyO1xuICAgIH1cbiAgfVxuXG4gIC8vIGNvbnN0cnVjdCB0aGUgY29tbWFuZCBvYmplY3RcbiAgbGV0IGNvbW1hbmROYW1lID0gJ3N3aXBlJztcbiAgaWYgKGxvbmdQcmVzcyA9PT0gdHJ1ZSkge1xuICAgIGNvbW1hbmROYW1lID0gJ2xvbmdwcmVzc3N3aXBlJztcbiAgfVxuXG4gIGxldCBjb21tYW5kT2JqZWN0ID0ge1xuICAgIG5hbWU6IGNvbW1hbmROYW1lLFxuICAgIGFyZ3M6IFtgJHtzdGFydFh9YCwgYCR7c3RhcnRZfWAsIGAke2RlbHRhWH1gLCBgJHtkZWx0YVl9YF1cbiAgfTtcblxuICBsZXQgY29tbWFuZEpTT04gPSBKU09OLnN0cmluZ2lmeShjb21tYW5kT2JqZWN0KTtcbiAgbGV0IGRhdGEgPSBhd2FpdCB0aGlzLmV4ZWN1dGVTb2NrZXRDb21tYW5kKGNvbW1hbmRKU09OKTtcblxuICBsZXQgcmVzdWx0O1xuICB0cnkge1xuICAgIHJlc3VsdCA9IEpTT04ucGFyc2UoZGF0YSk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0JhZCByZXNwb25zZSBmcm9tIGRvU3dpcGUnKTtcbiAgfVxuXG4gIC8vIGdldCBzdGF0dXMgcmV0dXJuZWRcbiAgaWYgKHJlc3VsdC5zdGF0dXMgPT09IHlvdWlFbmdpbmVEcml2ZXJSZXR1cm5WYWx1ZXMuV0VCRFJJVkVSX1NUQUxFX0VMRU1FTlQpIHtcbiAgICB0aHJvdyBuZXcgZXJyb3JzLlN0YWxlRWxlbWVudFJlZmVyZW5jZUVycm9yKHJlc3VsdC52YWx1ZSk7XG4gIH1cblxuICByZXR1cm4gcmVzdWx0LnZhbHVlO1xuXG59O1xuXG5jb21tYW5kcy5wZXJmb3JtVG91Y2ggPSBhc3luYyBmdW5jdGlvbiAoZ2VzdHVyZXMpIHtcblxuICBpZiAoZ2VzdHVyZXMubGVuZ3RoID09PSAzKSB7XG5cbiAgICBpZiAoZ2VzdHVyZXNbMF0uYWN0aW9uID09PSAncHJlc3MnICYmIGdlc3R1cmVzWzFdLmFjdGlvbiA9PT0gJ21vdmVUbycgJiYgZ2VzdHVyZXNbMl0uYWN0aW9uID09PSAncmVsZWFzZScpIHtcblxuICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuZG9Td2lwZShnZXN0dXJlcywgZmFsc2UpO1xuXG4gICAgfSBlbHNlIGlmIChnZXN0dXJlc1swXS5hY3Rpb24gPT09ICdsb25nUHJlc3MnICYmIGdlc3R1cmVzWzFdLmFjdGlvbiA9PT0gJ21vdmVUbycgJiYgZ2VzdHVyZXNbMl0uYWN0aW9uID09PSAncmVsZWFzZScpIHtcblxuICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuZG9Td2lwZShnZXN0dXJlcywgdHJ1ZSk7XG4gICAgfVxuXG4gIH0gZWxzZSBpZiAoZ2VzdHVyZXMubGVuZ3RoID09PSAyKSB7XG5cbiAgICBpZiAoZ2VzdHVyZXNbMF0uYWN0aW9uID09PSAncHJlc3MnICYmIGdlc3R1cmVzWzFdLmFjdGlvbiA9PT0gJ3JlbGVhc2UnKSB7XG5cbiAgICAgIHJldHVybiBhd2FpdCB0aGlzLnRhcChnZXN0dXJlcywgZmFsc2UpO1xuXG4gICAgfSBlbHNlIGlmIChnZXN0dXJlc1swXS5hY3Rpb24gPT09ICdsb25nUHJlc3MnICYmIGdlc3R1cmVzWzFdLmFjdGlvbiA9PT0gJ3JlbGVhc2UnKSB7XG5cbiAgICAgIHJldHVybiBhd2FpdCB0aGlzLnRhcChnZXN0dXJlcywgdHJ1ZSk7XG5cbiAgICB9XG4gIH0gZWxzZSBpZiAoZ2VzdHVyZXMubGVuZ3RoID09PSAxKSB7XG4gICAgaWYgKGdlc3R1cmVzWzBdLmFjdGlvbiA9PT0gJ3RhcCcpIHtcbiAgICAgIHJldHVybiBhd2FpdCB0aGlzLnRhcChnZXN0dXJlcywgZmFsc2UpO1xuICAgIH1cbiAgfVxufTtcblxuZXhwb3J0IGRlZmF1bHQgY29tbWFuZHM7XG4iXSwiZmlsZSI6ImxpYi9jb21tYW5kcy9nZXN0dXJlLmpzIiwic291cmNlUm9vdCI6Ii4uLy4uLy4uIn0=
