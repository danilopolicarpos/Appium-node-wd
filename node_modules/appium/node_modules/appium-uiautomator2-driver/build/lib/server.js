"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.startServer = startServer;
exports.default = void 0;

require("source-map-support/register");

var _logger = _interopRequireDefault(require("./logger"));

var _appiumBaseDriver = require("appium-base-driver");

var _driver = _interopRequireDefault(require("./driver"));

async function startServer(port = 4884, host = 'localhost') {
  let d = new _driver.default({
    port,
    host
  });
  let router = (0, _appiumBaseDriver.routeConfiguringFunction)(d);
  let server = (0, _appiumBaseDriver.server)(router, port, host);

  _logger.default.info(`Android Uiautomator2 server listening on http://${host}:${port}`);

  d.server = server;
  return await server;
}

var _default = startServer;
exports.default = _default;require('source-map-support').install();


//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxpYi9zZXJ2ZXIuanMiXSwibmFtZXMiOlsic3RhcnRTZXJ2ZXIiLCJwb3J0IiwiaG9zdCIsImQiLCJBbmRyb2lkVWlhdXRvbWF0b3IyRHJpdmVyIiwicm91dGVyIiwic2VydmVyIiwibG9nIiwiaW5mbyJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBQUE7O0FBQ0E7O0FBQ0E7O0FBR0EsZUFBZUEsV0FBZixDQUE0QkMsSUFBSSxHQUFHLElBQW5DLEVBQXlDQyxJQUFJLEdBQUcsV0FBaEQsRUFBNkQ7QUFDM0QsTUFBSUMsQ0FBQyxHQUFHLElBQUlDLGVBQUosQ0FBOEI7QUFBQ0gsSUFBQUEsSUFBRDtBQUFPQyxJQUFBQTtBQUFQLEdBQTlCLENBQVI7QUFDQSxNQUFJRyxNQUFNLEdBQUcsZ0RBQXlCRixDQUF6QixDQUFiO0FBQ0EsTUFBSUcsTUFBTSxHQUFHLDhCQUFXRCxNQUFYLEVBQW1CSixJQUFuQixFQUF5QkMsSUFBekIsQ0FBYjs7QUFDQUssa0JBQUlDLElBQUosQ0FBVSxtREFBa0ROLElBQUssSUFBR0QsSUFBSyxFQUF6RTs7QUFDQUUsRUFBQUEsQ0FBQyxDQUFDRyxNQUFGLEdBQVdBLE1BQVg7QUFDQSxTQUFPLE1BQU1BLE1BQWI7QUFDRDs7ZUFHY04sVyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBsb2cgZnJvbSAnLi9sb2dnZXInO1xuaW1wb3J0IHsgc2VydmVyIGFzIGJhc2VTZXJ2ZXIsIHJvdXRlQ29uZmlndXJpbmdGdW5jdGlvbiB9IGZyb20gJ2FwcGl1bS1iYXNlLWRyaXZlcic7XG5pbXBvcnQgQW5kcm9pZFVpYXV0b21hdG9yMkRyaXZlciBmcm9tICcuL2RyaXZlcic7XG5cblxuYXN5bmMgZnVuY3Rpb24gc3RhcnRTZXJ2ZXIgKHBvcnQgPSA0ODg0LCBob3N0ID0gJ2xvY2FsaG9zdCcpIHtcbiAgbGV0IGQgPSBuZXcgQW5kcm9pZFVpYXV0b21hdG9yMkRyaXZlcih7cG9ydCwgaG9zdH0pO1xuICBsZXQgcm91dGVyID0gcm91dGVDb25maWd1cmluZ0Z1bmN0aW9uKGQpO1xuICBsZXQgc2VydmVyID0gYmFzZVNlcnZlcihyb3V0ZXIsIHBvcnQsIGhvc3QpO1xuICBsb2cuaW5mbyhgQW5kcm9pZCBVaWF1dG9tYXRvcjIgc2VydmVyIGxpc3RlbmluZyBvbiBodHRwOi8vJHtob3N0fToke3BvcnR9YCk7XG4gIGQuc2VydmVyID0gc2VydmVyO1xuICByZXR1cm4gYXdhaXQgc2VydmVyO1xufVxuXG5leHBvcnQgeyBzdGFydFNlcnZlciB9O1xuZXhwb3J0IGRlZmF1bHQgc3RhcnRTZXJ2ZXI7XG4iXSwiZmlsZSI6ImxpYi9zZXJ2ZXIuanMiLCJzb3VyY2VSb290IjoiLi4vLi4ifQ==
